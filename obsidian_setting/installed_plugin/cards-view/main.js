/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var Co=Object.create;var _r=Object.defineProperty;var So=Object.getOwnPropertyDescriptor;var Po=Object.getOwnPropertyNames;var Ro=Object.getPrototypeOf,Ao=Object.prototype.hasOwnProperty;var Ji=t=>{throw TypeError(t)};var No=(t,e,r)=>e in t?_r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Do=(t,e)=>{for(var r in e)_r(t,r,{get:e[r],enumerable:!0})},es=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Po(e))!Ao.call(t,i)&&i!==r&&_r(t,i,{get:()=>e[i],enumerable:!(n=So(e,i))||n.enumerable});return t};var Fo=(t,e,r)=>(r=t!=null?Co(Ro(t)):{},es(e||!t||!t.__esModule?_r(r,"default",{value:t,enumerable:!0}):r,t)),Io=t=>es(_r({},"__esModule",{value:!0}),t);var $e=(t,e,r)=>No(t,typeof e!="symbol"?e+"":e,r),ts=(t,e,r)=>e.has(t)||Ji("Cannot "+r);var ae=(t,e,r)=>(ts(t,e,"read from private field"),r?r.call(t):e.get(t)),Lr=(t,e,r)=>e.has(t)?Ji("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Mr=(t,e,r,n)=>(ts(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var gl={};Do(gl,{default:()=>Pn});module.exports=Io(gl);var Rn=require("obsidian");var He=require("obsidian");var yo=require("obsidian");var Qr=!0;var rs,ns,An=(ns=(rs=globalThis.process)==null?void 0:rs.env)==null?void 0:ns.NODE_ENV;An||console.warn("If bundling, conditions should include development or production. If not bundling, conditions or NODE_ENV should include development or production. See https://www.npmjs.com/package/esm-env for tips on setting conditions in popular bundlers and runtimes.");var m=An&&!An.toLowerCase().includes("prod");var Ye=Array.isArray,mr=Array.from,Nn=Object.keys,G=Object.defineProperty,ft=Object.getOwnPropertyDescriptor,qr=Object.getOwnPropertyDescriptors,is=Object.prototype,zo=Array.prototype,bt=Object.getPrototypeOf;function Dn(t){return typeof t=="function"}var z=()=>{};function ss(t){return t()}function ct(t){for(var e=0;e<t.length;e++)t[e]()}var De=Symbol("$state"),os=Symbol("$state metadata"),Fn=Symbol("legacy props"),as=Symbol("");var Lo=typeof requestIdleCallback=="undefined"?t=>setTimeout(t,1):requestIdleCallback,Br=!1,Vr=!1,In=[],zn=[];function ls(){Br=!1;let t=In.slice();In=[],ct(t)}function fs(){Vr=!1;let t=zn.slice();zn=[],ct(t)}function xe(t){Br||(Br=!0,queueMicrotask(ls)),In.push(t)}function cs(t){Vr||(Vr=!0,Lo(fs)),zn.push(t)}function us(){Br&&ls(),Vr&&fs()}var Xr="font-weight: bold",Yr="font-weight: normal";function ds(t,e,r){m?console.warn(`%c[svelte] hydration_attribute_changed
%cThe \`${t}\` attribute on \`${e}\` changed its value between server and client renders. The client value, \`${r}\`, will be ignored in favour of the server value
https://svelte.dev/e/hydration_attribute_changed`,Xr,Yr):console.warn("https://svelte.dev/e/hydration_attribute_changed")}function Xt(t){m?console.warn(`%c[svelte] hydration_mismatch
%c${t?`Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${t}`:"Hydration failed because the initial UI does not match what was rendered on the server"}
https://svelte.dev/e/hydration_mismatch`,Xr,Yr):console.warn("https://svelte.dev/e/hydration_mismatch")}function ps(){m?console.warn(`%c[svelte] lifecycle_double_unmount
%cTried to unmount a component that was not mounted
https://svelte.dev/e/lifecycle_double_unmount`,Xr,Yr):console.warn("https://svelte.dev/e/lifecycle_double_unmount")}function Ur(t){m?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,Xr,Yr):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}var Yt="[",yt="[!",wt="]",ut={};var $t=Symbol(),Fe=Symbol("filename"),hs=Symbol("hmr");var Mo=Symbol("ADD_OWNER");function Gr(t){return t===this.v}function Gt(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function vr(t){return!Gt(t,this.v)}function Ln(){if(m){let t=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function _s(){if(m){let t=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/derived_references_self")}function ms(t){if(m){let e=new Error(`effect_in_teardown
\`${t}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function vs(){if(m){let t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function gs(t){if(m){let e=new Error(`effect_orphan
\`${t}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_orphan")}function xs(){if(m){let t=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This can happen when a reactive block or effect repeatedly sets a new value. Svelte limits the number of nested updates to prevent infinite loops
https://svelte.dev/e/effect_update_depth_exceeded`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function bs(){if(m){let t=new Error(`hydration_failed
Failed to hydrate the application
https://svelte.dev/e/hydration_failed`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/hydration_failed")}function ys(t){if(m){let e=new Error(`rune_outside_svelte
The \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function ws(){if(m){let t=new Error("state_unsafe_local_read\nReading state that was created inside the same derived is forbidden. Consider using `untrack` to read locally created state\nhttps://svelte.dev/e/state_unsafe_local_read");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function $s(){if(m){let t=new Error("state_unsafe_mutation\nUpdating state inside a derived or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}var Je=!1;function Os(){Je=!0}var gr=null;function dt(t){let e=Error(),r=e.stack;if(r){let n=r.split(`
`),i=[`
`];for(let s=0;s<n.length;s++){let o=n[s];if(o!=="Error"){if(o.includes("validate_each_keys"))return null;o.includes("svelte/src/internal")||i.push(o)}}if(i.length===1)return null;G(e,"stack",{value:i.join(`
`)}),G(e,"name",{value:`${t}Error`})}return e}var Ot=new Set;function Bn(t){Ot=t}function ye(t,e){var r={f:0,v:t,reactions:null,equals:Gr,version:0};return m&&(r.created=e!=null?e:dt("CreatedAt"),r.debug=null),r}function Zr(t){return Ts(ye(t))}function tt(t,e=!1){var n,i;let r=ye(t);return e||(r.equals=vr),Je&&S!==null&&S.l!==null&&((i=(n=S.l).s)!=null?i:n.s=[]).push(r),r}function Vn(t,e=!1){return Ts(tt(t,e))}function Ts(t){return T!==null&&T.f&2&&(Ie===null?js([t]):Ie.push(t)),t}function ee(t,e){return T!==null&&pt()&&T.f&18&&(Ie===null||!Ie.includes(t))&&$s(),Zt(t,e)}function Zt(t,e){if(!t.equals(e)&&(t.v=e,t.version=Hr(),m&&(t.updated=dt("UpdatedAt")),ks(t,2048),pt()&&y!==null&&y.f&1024&&!(y.f&32)&&(W!==null&&W.includes(t)?(fe(y,2048),Ht(y)):et===null?Cs([t]):et.push(t)),m&&Ot.size>0)){let n=Array.from(Ot);var r=rt;Wt(!0);try{for(let i of n)i.f&1024&&fe(i,4096),ht(i)&&Tt(i)}finally{Wt(r)}Ot.clear()}return e}function ks(t,e){var r=t.reactions;if(r!==null)for(var n=pt(),i=r.length,s=0;s<i;s++){var o=r[s],a=o.f;if(!(a&2048)&&!(!n&&o===y)){if(m&&a&262144){Ot.add(o);continue}fe(o,e),a&1280&&(a&2?ks(o,4096):Ht(o))}}}function kt(t){var i;var e=2050;y===null?e|=256:y.f|=1048576;var r=T!==null&&T.f&2?T:null;let n={children:null,ctx:S,deps:null,equals:Gr,f:e,fn:t,reactions:null,v:null,version:0,parent:r!=null?r:y};return m&&(n.created=dt("CreatedAt")),r!==null&&((i=r.children)!=null?i:r.children=[]).push(n),n}function Jr(t){let e=kt(t);return e.equals=vr,e}function Yn(t){var e=t.children;if(e!==null){t.children=null;for(var r=0;r<e.length;r+=1){var n=e[r];n.f&2?xr(n):te(n)}}}var Xn=[];function Qo(t){for(var e=t.parent;e!==null;){if(!(e.f&2))return e;e=e.parent}return null}function Gn(t){var e,r=y;if(q(Qo(t)),m){let n=Ot;Bn(new Set);try{Xn.includes(t)&&_s(),Xn.push(t),Yn(t),e=Kr(t)}finally{q(r),Bn(n),Xn.pop()}}else try{Yn(t),e=Kr(t)}finally{q(r)}return e}function Wn(t){var e=Gn(t),r=(nt||t.f&256)&&t.deps!==null?4096:1024;fe(t,r),t.equals(e)||(t.v=e,t.version=Hr())}function xr(t){Yn(t),jt(t,0),fe(t,16384),t.v=t.children=t.deps=t.ctx=t.reactions=null}function en(t){if(m){let e=new Error(`lifecycle_outside_component
\`${t}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}var Ns=0,Xo=1,Ss=new WeakSet,tn=!1,rn=Ns,br=!1,Kt=null,rt=!1,an=!1;function Wt(t){rt=t}function Hn(t){an=t}var Ct=[],Jt=0,yr=[],T=null;function Z(t){T=t}var y=null;function q(t){y=t}var Ie=null;function js(t){Ie=t}var W=null,we=0,et=null;function Cs(t){et=t}var Ds=1,nt=!1,Wr=null;var S=null;var Ee=null;function Hr(){return++Ds}function pt(){return!Je||S!==null&&S.l===null}function ht(t){var o,a,l,f;var e=t.f;if(e&2048)return!0;if(e&4096){var r=t.deps,n=(e&256)!==0;if(r!==null){var i;if(e&512){for(i=0;i<r.length;i++)((a=(o=r[i]).reactions)!=null?a:o.reactions=[]).push(t);t.f^=512}for(i=0;i<r.length;i++){var s=r[i];if(ht(s)&&Wn(s),n&&y!==null&&!nt&&!((l=s==null?void 0:s.reactions)!=null&&l.includes(t))&&((f=s.reactions)!=null?f:s.reactions=[]).push(t),s.version>t.version)return!0}}(!n||y!==null&&!nt)&&fe(t,1024)}return!1}function Ps(t,e){for(var r=e;r!==null;){if(r.f&128)try{r.fn(t);return}catch(n){r.f^=128}r=r.parent}throw tn=!1,t}function Rs(t){return(t.f&16384)===0&&(t.parent===null||(t.parent.f&128)===0)}function er(t,e,r,n){var c,u;if(tn){if(r===null&&(tn=!1),Rs(e))throw t;return}if(r!==null&&(tn=!0),!m||n===null||!(t instanceof Error)||Ss.has(t)){Ps(t,e);return}Ss.add(t);let i=[],s=(c=e.fn)==null?void 0:c.name;s&&i.push(s);let o=n;for(;o!==null;){if(m){var a=(u=o.function)==null?void 0:u[Fe];if(a){let d=a.split("/").pop();i.push(d)}}o=o.p}let l=/Firefox/.test(navigator.userAgent)?"  ":"	";G(t,"message",{value:t.message+`
${i.map(d=>`
${l}in ${d}`).join("")}
`}),G(t,"component_stack",{value:i});let f=t.stack;if(f){let d=f.split(`
`),p=[];for(let _=0;_<d.length;_++){let h=d[_];h.includes("svelte/src/internal")||p.push(h)}G(t,"stack",{value:p.join(`
`)})}if(Ps(t,e),Rs(e))throw t}function Kr(t){var d,p;var e=W,r=we,n=et,i=T,s=nt,o=Ie,a=S,l=t.f;W=null,we=0,et=null,T=l&96?null:t,nt=!rt&&(l&256)!==0,Ie=null,S=t.ctx;try{var f=(0,t.fn)(),c=t.deps;if(W!==null){var u;if(jt(t,we),c!==null&&we>0)for(c.length=we+W.length,u=0;u<W.length;u++)c[we+u]=W[u];else t.deps=c=W;if(!nt)for(u=we;u<c.length;u++)((p=(d=c[u]).reactions)!=null?p:d.reactions=[]).push(t)}else c!==null&&we<c.length&&(jt(t,we),c.length=we);return f}finally{W=e,we=r,et=n,T=i,nt=s,Ie=o,S=a}}function Yo(t,e){let r=e.reactions;if(r!==null){var n=r.indexOf(t);if(n!==-1){var i=r.length-1;i===0?r=e.reactions=null:(r[n]=r[i],r.pop())}}r===null&&e.f&2&&(W===null||!W.includes(e))&&(fe(e,4096),e.f&768||(e.f^=512),jt(e,0))}function jt(t,e){var r=t.deps;if(r!==null)for(var n=e;n<r.length;n++)Yo(t,r[n])}function Tt(t){var e=t.f;if(!(e&16384)){fe(t,1024);var r=y,n=S;if(y=t,m){var i=Ee;Ee=t.component_function}try{e&16?Ls(t):ei(t),Jn(t),Kn(t);var s=Kr(t);t.teardown=typeof s=="function"?s:null,t.version=Ds,m&&yr.push(t)}catch(o){er(o,t,r,n||t.ctx)}finally{y=r,m&&(Ee=i)}}}function As(){console.error("Last ten effects were: ",yr.slice(-10).map(t=>t.fn)),yr=[]}function Fs(){if(Jt>1e3){Jt=0;try{xs()}catch(t){if(m&&G(t,"stack",{value:""}),Kt!==null)if(m)try{er(t,Kt,null,null)}catch(e){throw As(),e}else er(t,Kt,null,null);else throw m&&As(),t}}Jt++}function Is(t){var e=t.length;if(e!==0){Fs();var r=rt;rt=!0;try{for(var n=0;n<e;n++){var i=t[n];i.f&1024||(i.f^=1024);var s=[];zs(i,s),Uo(s)}}finally{rt=r}}}function Uo(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var n=t[r];if(!(n.f&24576))try{ht(n)&&(Tt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?ti(n):n.fn=null))}catch(i){er(i,n,null,n.ctx)}}}function Go(){if(br=!1,Jt>1001)return;let t=Ct;Ct=[],Is(t),br||(Jt=0,Kt=null,m&&(yr=[]))}function Ht(t){rn===Ns&&(br||(br=!0,queueMicrotask(Go))),Kt=t;for(var e=t;e.parent!==null;){e=e.parent;var r=e.f;if(r&96){if(!(r&1024))return;e.f^=1024}}Ct.push(e)}function zs(t,e){var r=t.first,n=[];e:for(;r!==null;){var i=r.f,s=(i&32)!==0,o=s&&(i&1024)!==0,a=r.next;if(!o&&!(i&8192))if(i&8){if(s)r.f^=1024;else try{ht(r)&&Tt(r)}catch(u){er(u,r,null,r.ctx)}var l=r.first;if(l!==null){r=l;continue}}else i&4&&n.push(r);if(a===null){let u=r.parent;for(;u!==null;){if(t===u)break e;var f=u.next;if(f!==null){r=f;continue e}u=u.parent}}r=a}for(var c=0;c<n.length;c++)l=n[c],e.push(l),zs(l,e)}function Pt(t){var e=rn,r=Ct;try{Fs();let i=[];rn=Xo,Ct=i,br=!1,Is(r);var n=t==null?void 0:t();return us(),(Ct.length>0||i.length>0)&&Pt(),Jt=0,Kt=null,m&&(yr=[]),n}finally{rn=e,Ct=r}}async function wr(){await Promise.resolve(),Pt()}function N(t){var u,d;var e=t.f,r=(e&2)!==0;if(r&&e&16384){var n=Gn(t);return xr(t),n}if(Wr!==null&&Wr.add(t),T!==null){Ie!==null&&Ie.includes(t)&&ws();var i=T.deps;W===null&&i!==null&&i[we]===t?we++:W===null?W=[t]:W.push(t),et!==null&&y!==null&&y.f&1024&&!(y.f&32)&&et.includes(t)&&(fe(y,2048),Ht(y))}else if(r&&t.deps===null)for(var s=t,o=s.parent,a=s;o!==null;)if(o.f&2){var l=o;a=l,o=l.parent}else{var f=o;(u=f.deriveds)!=null&&u.includes(a)||((d=f.deriveds)!=null?d:f.deriveds=[]).push(a);break}if(r&&(s=t,ht(s)&&Wn(s)),m&&gr!==null&&T!==null&&gr.reaction===T){if(t.debug)t.debug();else if(t.created){var c=gr.entries.get(t);c===void 0&&(c={read:[]},gr.entries.set(t,c)),c.read.push(dt("TracedAt"))}}return t.v}function R(t){let e=T;try{return T=null,t()}finally{T=e}}var Wo=-7169;function fe(t,e){t.f=t.f&Wo|e}function Rt(t,e=!1,r){S={p:S,c:null,e:null,m:!1,s:t,x:null,l:null},Je&&!e&&(S.l={s:null,u:null,r1:[],r2:ye(!1)}),m&&(S.function=r,Ee=r)}function At(t){var o,a;let e=S;if(e!==null){t!==void 0&&(e.x=t);let l=e.e;if(l!==null){var r=y,n=T;e.e=null;try{for(var i=0;i<l.length;i++){var s=l[i];q(s.effect),Z(s.reaction),pe(s.fn)}}finally{q(r),Z(n)}}S=e.p,m&&(Ee=(a=(o=e.p)==null?void 0:o.function)!=null?a:null),e.m=!0}return t||{}}function $r(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(De in t)on(t);else if(!Array.isArray(t))for(let e in t){let r=t[e];typeof r=="object"&&r&&De in r&&on(r)}}}function on(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{on(t[n],e)}catch(i){}let r=bt(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){let n=qr(r);for(let i in n){let s=n[i].get;if(s)try{s.call(t)}catch(o){}}}}}if(m){let t=function(e){if(!(e in globalThis)){let r;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(r!==void 0)return r;ys(e)},set:n=>{r=n}})}};t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}var O=!1;function he(t){O=t}var j;function L(t){if(t===null)throw Xt(),ut;return j=t}function re(){return L(ce(j))}function _e(t){if(O){if(ce(j)!==null)throw Xt(),ut;j=t}}function rr(){for(var t=0,e=j;;){if(e.nodeType===8){var r=e.data;if(r===wt){if(t===0)return e;t-=1}else(r===Yt||r===yt)&&(t+=1)}var n=ce(e);e.remove(),e=n}}function Nt(t){return t!==null&&typeof t=="object"&&De in t?t[De]:t}function Ms(){let t=Array.prototype,e=Array.__svelte_cleanup;e&&e();let{indexOf:r,lastIndexOf:n,includes:i}=t;t.indexOf=function(s,o){let a=r.call(this,s,o);return a===-1&&r.call(Nt(this),Nt(s),o)!==-1&&Ur("array.indexOf(...)"),a},t.lastIndexOf=function(s,o){let a=n.call(this,s,o!=null?o:this.length-1);return a===-1&&n.call(Nt(this),Nt(s),o!=null?o:this.length-1)!==-1&&Ur("array.lastIndexOf(...)"),a},t.includes=function(s,o){let a=i.call(this,s,o);return a||i.call(Nt(this),Nt(s),o)&&Ur("array.includes(...)"),a},Array.__svelte_cleanup=()=>{t.indexOf=r,t.lastIndexOf=n,t.includes=i}}var ri,Qs,qs,Bs;function ln(){if(ri===void 0){ri=window,Qs=document;var t=Element.prototype,e=Node.prototype;qs=ft(e,"firstChild").get,Bs=ft(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0,m&&(t.__svelte_meta=null,Ms())}}function ze(t=""){return document.createTextNode(t)}function ne(t){return qs.call(t)}function ce(t){return Bs.call(t)}function Ce(t,e){if(!O)return ne(t);var r=ne(j);if(r===null)r=j.appendChild(ze());else if(e&&r.nodeType!==3){var n=ze();return r==null||r.before(n),L(n),n}return L(r),r}function ni(t,e){var i,s;if(!O){var r=ne(t);return r instanceof Comment&&r.data===""?ce(r):r}if(e&&((i=j)==null?void 0:i.nodeType)!==3){var n=ze();return(s=j)==null||s.before(n),L(n),n}return j}function ue(t,e=1,r=!1){let n=O?j:t;for(var i;e--;)i=n,n=ce(n);if(!O)return n;var s=n==null?void 0:n.nodeType;if(r&&s!==3){var o=ze();return n===null?i==null||i.after(o):n.before(o),L(o),o}return L(n),n}function Or(t){t.textContent=""}function si(t){y===null&&T===null&&gs(t),T!==null&&T.f&256&&vs(),an&&ms(t)}function Zo(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Dt(t,e,r,n=!0){var c;var i=(t&64)!==0,s=y;if(m)for(;s!==null&&s.f&262144;)s=s.parent;var o={ctx:S,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|2048,first:null,fn:e,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,version:0};if(m&&(o.component_function=Ee),r){var a=rt;try{Wt(!0),Tt(o),o.f|=32768}catch(u){throw te(o),u}finally{Wt(a)}}else e!==null&&Ht(o);var l=r&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&1048576)===0;if(!l&&!i&&n&&(s!==null&&Zo(o,s),T!==null&&T.f&2)){var f=T;((c=f.children)!=null?c:f.children=[]).push(o)}return o}function Se(t){let e=Dt(8,null,!1);return fe(e,1024),e.teardown=t,e}function nr(t){var i;si("$effect");var e=y!==null&&(y.f&32)!==0&&S!==null&&!S.m;if(m&&G(t,"name",{value:"$effect"}),e){var r=S;((i=r.e)!=null?i:r.e=[]).push({fn:t,effect:y,reaction:T})}else{var n=pe(t);return n}}function Ut(t){return si("$effect.pre"),m&&G(t,"name",{value:"$effect.pre"}),X(t)}function fn(t){let e=Dt(64,t,!0);return()=>{te(e)}}function Xs(t){let e=Dt(64,t,!0);return(r={})=>new Promise(n=>{r.outro?Me(e,()=>{te(e),n(void 0)}):(te(e),n(void 0))})}function pe(t){return Dt(4,t,!1)}function X(t){return Dt(8,t,!0)}function We(t){return m&&G(t,"name",{value:"{expression}"}),me(t)}function me(t,e=0){return Dt(24|e,t,!0)}function ie(t,e=!0){return Dt(40,t,!0,e)}function Kn(t){var e=t.teardown;if(e!==null){let r=an,n=T;Hn(!0),Z(null);try{e.call(null)}finally{Hn(r),Z(n)}}}function Jn(t){var e=t.deriveds;if(e!==null){t.deriveds=null;for(var r=0;r<e.length;r+=1)xr(e[r])}}function ei(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var n=r.next;te(r,e),r=n}}function Ls(t){for(var e=t.first;e!==null;){var r=e.next;e.f&32||te(e),e=r}}function te(t,e=!0){var r=!1;if((e||t.f&524288)&&t.nodes_start!==null){for(var n=t.nodes_start,i=t.nodes_end;n!==null;){var s=n===i?null:ce(n);n.remove(),n=s}r=!0}ei(t,e&&!r),Jn(t),jt(t,0),fe(t,16384);var o=t.transitions;if(o!==null)for(let l of o)l.stop();Kn(t);var a=t.parent;a!==null&&a.first!==null&&ti(t),m&&(t.component_function=null),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function ti(t){var e=t.parent,r=t.prev,n=t.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=r))}function Me(t,e){var r=[];cn(t,r,!0),oi(r,()=>{te(t),e&&e()})}function oi(t,e){var r=t.length;if(r>0){var n=()=>--r||e();for(var i of t)i.out(n)}else e()}function cn(t,e,r){if(!(t.f&8192)){if(t.f^=8192,t.transitions!==null)for(let o of t.transitions)(o.is_global||r)&&e.push(o);for(var n=t.first;n!==null;){var i=n.next,s=(n.f&65536)!==0||(n.f&32)!==0;cn(n,e,s?r:!1),n=i}}}function mt(t){Ys(t,!0)}function Ys(t,e){if(t.f&8192){ht(t)&&Tt(t),t.f^=8192;for(var r=t.first;r!==null;){var n=r.next,i=(r.f&65536)!==0||(r.f&32)!==0;Ys(r,i?e:!1),r=n}if(t.transitions!==null)for(let s of t.transitions)(s.is_global||e)&&s.in()}}var Ho=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","webkitdirectory"];var uc=[...Ho,"formNoValidate","isMap","noModule","playsInline","readOnly","value","inert","volume","defaultValue","defaultChecked","srcObject"];var Ko=["touchstart","touchmove"];function Us(t){return Ko.includes(t)}var Gs=new Map;function Ws(t,e){var r=Gs.get(t);r||(r=new Set,Gs.set(t,r)),r.add(e)}var Zs=!1;function un(){Zs||(Zs=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(let r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function ai(t){var e=T,r=y;Z(null),q(null);try{return t()}finally{Z(e),q(r)}}function li(t,e,r,n=r){t.addEventListener(e,()=>ai(r));let i=t.__on_r;i?t.__on_r=()=>{i(),n(!0)}:t.__on_r=()=>n(!0),un()}var fi=new Set,dn=new Set;function ir(t){for(var e=0;e<t.length;e++)fi.add(t[e]);for(var r of dn)r(t)}function Er(t){var k;var e=this,r=e.ownerDocument,n=t.type,i=((k=t.composedPath)==null?void 0:k.call(t))||[],s=i[0]||t.target,o=0,a=t.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var f=i.indexOf(e);if(f===-1)return;l<=f&&(o=l)}if(s=i[o]||t.target,s!==e){G(t,"currentTarget",{configurable:!0,get(){return s||r}});var c=T,u=y;Z(null),q(null);try{for(var d,p=[];s!==null;){var _=s.assignedSlot||s.parentNode||s.host||null;try{var h=s["__"+n];if(h!==void 0&&!s.disabled)if(Ye(h)){var[b,...$]=h;b.apply(s,[t,...$])}else h.call(s,t)}catch(v){d?p.push(v):d=v}if(t.cancelBubble||_===e||_===null)break;s=_}if(d){for(let v of p)queueMicrotask(()=>{throw v});throw d}}finally{t.__root=e,delete t.currentTarget,Z(c),q(u)}}}var ea;function Hs(){ea=void 0}function pn(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function vt(t,e){var r=y;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function it(t,e){var r=(e&1)!==0,n=(e&2)!==0,i,s=!t.startsWith("<!>");return()=>{if(O)return vt(j,null),j;i===void 0&&(i=pn(s?t:"<!>"+t),r||(i=ne(i)));var o=n?document.importNode(i,!0):i.cloneNode(!0);if(r){var a=ne(o),l=o.lastChild;vt(a,l)}else vt(o,o);return o}}function Qe(t,e){if(O){y.nodes_end=j,re();return}t!==null&&t.before(e)}var hn=!0;function or(t,e){var n;var r=e==null?"":typeof e=="object"?e+"":e;r!==((n=t.__t)!=null?n:t.__t=t.nodeValue)&&(t.__t=r,t.nodeValue=r==null?"":r+"")}function ar(t,e){return Ks(t,e)}function ui(t,e){var o;ln(),e.intro=(o=e.intro)!=null?o:!1;let r=e.target,n=O,i=j;try{for(var s=ne(r);s&&(s.nodeType!==8||s.data!==Yt);)s=ce(s);if(!s)throw ut;he(!0),L(s),re();let a=Ks(t,{...e,anchor:s});if(j===null||j.nodeType!==8||j.data!==wt)throw Xt(),ut;return he(!1),a}catch(a){if(a===ut)return e.recover===!1&&bs(),ln(),Or(r),he(!1),ar(t,e);throw a}finally{he(n),L(i),Hs()}}var sr=new Map;function Ks(t,{target:e,anchor:r,props:n={},events:i,context:s,intro:o=!0}){ln();var a=new Set,l=u=>{for(var d=0;d<u.length;d++){var p=u[d];if(!a.has(p)){a.add(p);var _=Us(p);e.addEventListener(p,Er,{passive:_});var h=sr.get(p);h===void 0?(document.addEventListener(p,Er,{passive:_}),sr.set(p,1)):sr.set(p,h+1)}}};l(mr(fi)),dn.add(l);var f=void 0,c=Xs(()=>{var u=r!=null?r:e.appendChild(ze());return ie(()=>{if(s){Rt({});var d=S;d.c=s}i&&(n.$$events=i),O&&vt(u,null),hn=o,f=t(u,n)||{},hn=!0,O&&(y.nodes_end=j),s&&At()}),()=>{var _;for(var d of a){e.removeEventListener(d,Er);var p=sr.get(d);--p===0?(document.removeEventListener(d,Er),sr.delete(d)):sr.set(d,p)}dn.delete(l),u!==r&&((_=u.parentNode)==null||_.removeChild(u))}});return ci.set(f,c),f}var ci=new WeakMap;function di(t,e){let r=ci.get(t);return r?(ci.delete(t),r(e)):(m&&ps(),Promise.resolve())}function lr(t,e,r=!1){O&&re();var n=t,i=null,s=null,o=$t,a=r?65536:0,l=!1;let f=(u,d=!0)=>{l=!0,c(d,u)},c=(u,d)=>{if(o===(o=u))return;let p=!1;if(O){let _=n.data===yt;!!o===_&&(n=rr(),L(n),he(!1),p=!0)}o?(i?mt(i):d&&(i=ie(()=>d(n))),s&&Me(s,()=>{s=null})):(s?mt(s):d&&(s=ie(()=>d(n))),i&&Me(i,()=>{i=null})),p&&he(!0)};me(()=>{l=!1,e(f),l||c(null,null)},a),O&&(n=j)}var Tr=null;function _i(t,e){return e}function la(t,e,r,n){for(var i=[],s=e.length,o=0;o<s;o++)cn(e[o].e,i,!0);var a=s>0&&i.length===0&&r!==null;if(a){var l=r.parentNode;Or(l),l.append(r),n.clear(),gt(t,e[0].prev,e[s-1].next)}oi(i,()=>{for(var f=0;f<s;f++){var c=e[f];a||(n.delete(c.k),gt(t,c.prev,c.next)),te(c.e,!a)}})}function _n(t,e,r,n,i,s=null){var o=t,a={flags:e,items:new Map,first:null},l=(e&4)!==0;if(l){var f=t;o=O?L(ne(f)):f.appendChild(ze())}O&&re();var c=null,u=!1;me(()=>{var d=r(),p=Ye(d)?d:d==null?[]:mr(d),_=p.length;if(u&&_===0)return;u=_===0;let h=!1;if(O){var b=o.data===yt;b!==(_===0)&&(o=rr(),L(o),he(!1),h=!0)}if(O){for(var $=null,k,v=0;v<_;v++){if(j.nodeType===8&&j.data===wt){o=j,h=!0,he(!1);break}var P=p[v],x=n(P,v);k=to(j,a,$,null,P,x,v,i,e,r),a.items.set(x,k),$=k}_>0&&L(rr())}if(!O){var E=T;fa(p,a,o,i,e,(E.f&8192)!==0,n,r)}s!==null&&(_===0?c?mt(c):c=ie(()=>s(o)):c!==null&&Me(c,()=>{c=null})),h&&he(!0),r()}),O&&(o=j)}function fa(t,e,r,n,i,s,o,a){var U,K,ge,w;var l=(i&8)!==0,f=(i&3)!==0,c=t.length,u=e.items,d=e.first,p=d,_,h=null,b,$=[],k=[],v,P,x,E;if(l)for(E=0;E<c;E+=1)v=t[E],P=o(v,E),x=u.get(P),x!==void 0&&((U=x.a)==null||U.measure(),(b!=null?b:b=new Set).add(x));for(E=0;E<c;E+=1){if(v=t[E],P=o(v,E),x=u.get(P),x===void 0){var Q=p?p.e.nodes_start:r;h=to(Q,e,h,h===null?e.first:h.next,v,P,E,n,i,a),u.set(P,h),$=[],k=[],p=h.next;continue}if(f&&ca(x,v,E,i),x.e.f&8192&&(mt(x.e),l&&((K=x.a)==null||K.unfix(),(b!=null?b:b=new Set).delete(x))),x!==p){if(_!==void 0&&_.has(x)){if($.length<k.length){var g=k[0],C;h=g.prev;var A=$[0],M=$[$.length-1];for(C=0;C<$.length;C+=1)Js($[C],g,r);for(C=0;C<k.length;C+=1)_.delete(k[C]);gt(e,A.prev,M.next),gt(e,h,A),gt(e,M,g),p=g,h=M,E-=1,$=[],k=[]}else _.delete(x),Js(x,p,r),gt(e,x.prev,x.next),gt(e,x,h===null?e.first:h.next),gt(e,h,x),h=x;continue}for($=[],k=[];p!==null&&p.k!==P;)(s||!(p.e.f&8192))&&(_!=null?_:_=new Set).add(p),k.push(p),p=p.next;if(p===null)continue;x=p}$.push(x),h=x,p=x.next}if(p!==null||_!==void 0){for(var D=_===void 0?[]:mr(_);p!==null;)(s||!(p.e.f&8192))&&D.push(p),p=p.next;var V=D.length;if(V>0){var ve=i&4&&c===0?r:null;if(l){for(E=0;E<V;E+=1)(ge=D[E].a)==null||ge.measure();for(E=0;E<V;E+=1)(w=D[E].a)==null||w.fix()}la(e,D,ve,u)}}l&&xe(()=>{var F;if(b!==void 0)for(x of b)(F=x.a)==null||F.apply()}),y.first=e.first&&e.first.e,y.last=h&&h.e}function ca(t,e,r,n){n&1&&Zt(t.v,e),n&2?Zt(t.i,r):t.i=r}function to(t,e,r,n,i,s,o,a,l,f){var c=Tr,u=(l&1)!==0,d=(l&16)===0,p=u?d?tt(i):ye(i):i,_=l&2?ye(o):o;m&&u&&(p.debug=()=>{var b=typeof _=="number"?o:_.v;f()[b]});var h={i:_,v:p,k:s,a:null,e:null,prev:r,next:n};Tr=h;try{return h.e=ie(()=>a(t,p,_),O),h.e.prev=r&&r.e,h.e.next=n&&n.e,r===null?e.first=h:(r.next=h,r.e.next=h.e),n!==null&&(n.prev=h,n.e.prev=h.e),h}finally{Tr=c}}function Js(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,i=e?e.e.nodes_start:r,s=t.e.nodes_start;s!==n;){var o=ce(s);i.before(s),s=o}}function gt(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function kr(t,e){xe(()=>{var i;var r=t.getRootNode(),n=r.host?r:(i=r.head)!=null?i:r.ownerDocument.head;if(!n.querySelector("#"+e.hash)){let s=document.createElement("style");s.id=e.hash,s.textContent=e.code,n.appendChild(s),m&&Ws(e.hash,s)}})}function st(t,e,r){pe(()=>{var n=R(()=>e(t,r==null?void 0:r())||{});if(r&&(n!=null&&n.update)){var i=!1,s={};X(()=>{var o=r();$r(o),i&&Gt(s,o)&&(s=o,n.update(o))}),i=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function vi(t){if(O){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var n=t.value;fr(t,"value",null),t.value=n}if(t.hasAttribute("checked")){var i=t.checked;fr(t,"checked",null),t.checked=i}}};t.__on_r=r,cs(r),un()}}function fr(t,e,r,n){var s;var i=(s=t.__attributes)!=null?s:t.__attributes={};if(O&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")){n||ha(t,e,r!=null?r:"");return}i[e]!==(i[e]=r)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[as]=r),r==null?t.removeAttribute(e):typeof r!="string"&&pa(t).includes(e)?t[e]=r:t.setAttribute(e,r))}var ro=new Map;function pa(t){var e=ro.get(t.nodeName);if(e)return e;ro.set(t.nodeName,e=[]);for(var r,n=t,i=Element.prototype;i!==n;){r=qr(n);for(var s in r)r[s].set&&e.push(s);n=bt(n)}return e}function ha(t,e,r){var n;m&&(e==="srcset"&&_a(t,r)||mi((n=t.getAttribute(e))!=null?n:"",r)||ds(e,t.outerHTML.replace(t.innerHTML,t.innerHTML&&"..."),String(r)))}function mi(t,e){return t===e?!0:new URL(t,document.baseURI).href===new URL(e,document.baseURI).href}function no(t){return t.split(",").map(e=>e.trim().split(" ").filter(Boolean))}function _a(t,e){var r=no(t.srcset),n=no(e);return n.length===r.length&&n.every(([i,s],o)=>s===r[o][1]&&(mi(r[o][0],i)||mi(i,r[o][0])))}function Ft(t,e,r){if(r){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function gi(t,e,r,n){var s;var i=(s=t.__styles)!=null?s:t.__styles={};i[e]!==r&&(i[e]=r,r==null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":""))}var ma=Qr?()=>performance.now():()=>Date.now(),qe={tick:t=>(Qr?requestAnimationFrame:z)(t),now:()=>ma(),tasks:new Set};function io(){let t=qe.now();qe.tasks.forEach(e=>{e.c(t)||(qe.tasks.delete(e),e.f())}),qe.tasks.size!==0&&qe.tick(io)}function so(t){let e;return qe.tasks.size===0&&qe.tick(io),{promise:new Promise(r=>{qe.tasks.add(e={c:t,f:r})}),abort(){qe.tasks.delete(e)}}}function mn(t,e){t.dispatchEvent(new CustomEvent(e))}function ba(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;let e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function oo(t){let e={},r=t.split(";");for(let n of r){let[i,s]=n.split(":");if(!i||s===void 0)break;let o=ba(i.trim());e[o]=s.trim()}return e}var ya=t=>t;function bi(t,e,r,n){var k;var i=(t&1)!==0,s=(t&2)!==0,o=i&&s,a=(t&4)!==0,l=o?"both":i?"in":"out",f,c=e.inert,u,d;function p(){var x;var v=T,P=y;Z(null),q(null);try{return f!=null?f:f=r()(e,(x=n==null?void 0:n())!=null?x:{},{direction:l})}finally{Z(v),q(P)}}var _={is_global:a,in(){var v;if(e.inert=c,!i){d==null||d.abort(),(v=d==null?void 0:d.reset)==null||v.call(d);return}s||u==null||u.abort(),mn(e,"introstart"),u=xi(e,p(),d,1,()=>{mn(e,"introend"),u==null||u.abort(),u=f=void 0})},out(v){if(!s){v==null||v(),f=void 0;return}e.inert=!0,mn(e,"outrostart"),d=xi(e,p(),u,0,()=>{mn(e,"outroend"),v==null||v()})},stop:()=>{u==null||u.abort(),d==null||d.abort()}},h=y;if(((k=h.transitions)!=null?k:h.transitions=[]).push(_),i&&hn){var b=a;if(!b){for(var $=h.parent;$&&$.f&65536;)for(;($=$.parent)&&!($.f&16););b=!$||($.f&32768)!==0}b&&pe(()=>{R(()=>_.in())})}}function xi(t,e,r,n,i){var s=n===1;if(Dn(e)){var o,a=!1;return xe(()=>{if(!a){var b=e({direction:s?"in":"out"});o=xi(t,b,r,n,i)}}),{abort:()=>{a=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return i(),{abort:z,deactivate:z,reset:z,t:()=>n};let{delay:l=0,css:f,tick:c,easing:u=ya}=e;var d=[];if(s&&r===void 0&&(c&&c(0,1),f)){var p=oo(f(0,1));d.push(p,p)}var _=()=>1-n,h=t.animate(d,{duration:l});return h.onfinish=()=>{var g;var b=(g=r==null?void 0:r.t())!=null?g:1-n;r==null||r.abort();var $=n-b,k=e.duration*Math.abs($),v=[];if(k>0){if(f)for(var P=Math.ceil(k/16.666666666666668),x=0;x<=P;x+=1){var E=b+$*u(x/P),Q=f(E,1-E);v.push(oo(Q))}_=()=>{var C=h.currentTime;return b+$*u(C/k)},c&&so(()=>{if(h.playState!=="running")return!1;var C=_();return c(C,1-C),!0})}h=t.animate(v,{duration:k,fill:"forwards"}),h.onfinish=()=>{_=()=>n,c==null||c(n,1-n),i()}},{abort:()=>{h&&(h.cancel(),h.effect=null,h.onfinish=z)},deactivate:()=>{i=z},reset:()=>{n===0&&(c==null||c(1,0))},t:()=>_()}}function $i(t,e,r=e){var n=pt();li(t,"input",i=>{m&&t.type==="checkbox"&&Ln();var s=i?t.defaultValue:t.value;if(s=yi(t)?wi(s):s,r(s),n&&s!==(s=e())){var o=t.selectionStart,a=t.selectionEnd;t.value=s!=null?s:"",a!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(a,t.value.length))}}),(O&&t.defaultValue!==t.value||R(e)==null&&t.value)&&r(yi(t)?wi(t.value):t.value),X(()=>{m&&t.type==="checkbox"&&Ln();var i=e();yi(t)&&i===wi(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i!=null?i:"")})}function yi(t){var e=t.type;return e==="number"||e==="range"}function wi(t){return t===""?null:+t}function ao(t,e){return t===e||(t==null?void 0:t[De])===e}function jr(t={},e,r,n){return pe(()=>{var i,s;return X(()=>{i=s,s=(n==null?void 0:n())||[],R(()=>{t!==r(...s)&&(e(t,...s),i&&ao(r(...i),t)&&e(null,...i))})}),()=>{xe(()=>{s&&ao(r(...s),t)&&e(null,...s)})}}),t}function Oi(t=!1){let e=S,r=e.l.u;if(!r)return;let n=()=>$r(e.s);if(t){let i=0,s={},o=kt(()=>{let a=!1,l=e.s;for(let f in l)l[f]!==s[f]&&(s[f]=l[f],a=!0);return a&&i++,i});n=()=>N(o)}r.b.length&&Ut(()=>{lo(e,n),ct(r.b)}),nr(()=>{let i=R(()=>r.m.map(ss));return()=>{for(let s of i)typeof s=="function"&&s()}}),r.a.length&&nr(()=>{lo(e,n),ct(r.a)})}function lo(t,e){if(t.l.s)for(let r of t.l.s)N(r);e()}function Pe(t,e,r){var s;let n=(s=r[e])!=null?s:r[e]={store:null,source:tt(void 0),unsubscribe:z};if(n.store!==t)if(n.unsubscribe(),n.store=t!=null?t:null,t==null)n.source.v=void 0,n.unsubscribe=z;else{var i=!0;n.unsubscribe=Pr(t,o=>{i?n.source.v=o:ee(n.source,o)}),i=!1}return N(n.source)}function Ze(t,e){return t.set(e),e}function Cr(){let t={};return Se(()=>{for(var e in t)t[e].unsubscribe()}),t}function Sr(t,e,r){return t.set(r),e}function fo(t){return new Ei(t)}var ot,Re,Ei=class{constructor(e){Lr(this,ot);Lr(this,Re);var s,o;var r=new Map,n=(a,l)=>{var f=tt(l);return r.set(a,f),f};let i=new Proxy({...e.props||{},$$events:{}},{get(a,l){var f;return N((f=r.get(l))!=null?f:n(l,Reflect.get(a,l)))},has(a,l){var f;return l===Fn?!0:(N((f=r.get(l))!=null?f:n(l,Reflect.get(a,l))),Reflect.has(a,l))},set(a,l,f){var c;return ee((c=r.get(l))!=null?c:n(l,f),f),Reflect.set(a,l,f)}});Mr(this,Re,(e.hydrate?ui:ar)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:(s=e.intro)!=null?s:!1,recover:e.recover})),(!((o=e==null?void 0:e.props)!=null&&o.$$host)||e.sync===!1)&&Pt(),Mr(this,ot,i.$$events);for(let a of Object.keys(ae(this,Re)))a==="$set"||a==="$destroy"||a==="$on"||G(this,a,{get(){return ae(this,Re)[a]},set(l){ae(this,Re)[a]=l},enumerable:!0});ae(this,Re).$set=a=>{Object.assign(i,a)},ae(this,Re).$destroy=()=>{di(ae(this,Re))}}$set(e){ae(this,Re).$set(e)}$on(e,r){ae(this,ot)[e]=ae(this,ot)[e]||[];let n=(...i)=>r.call(this,...i);return ae(this,ot)[e].push(n),()=>{ae(this,ot)[e]=ae(this,ot)[e].filter(i=>i!==n)}}$destroy(){ae(this,Re).$destroy()}};ot=new WeakMap,Re=new WeakMap;var Aa;typeof HTMLElement=="function"&&(Aa=class extends HTMLElement{constructor(e,r,n){super();$e(this,"$$ctor");$e(this,"$$s");$e(this,"$$c");$e(this,"$$cn",!1);$e(this,"$$d",{});$e(this,"$$r",!1);$e(this,"$$p_d",{});$e(this,"$$l",{});$e(this,"$$l_u",new Map);$e(this,"$$me");this.$$ctor=e,this.$$s=r,n&&this.attachShadow({mode:"open"})}addEventListener(e,r,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(r),this.$$c){let i=this.$$c.$on(e,r);this.$$l_u.set(r,i)}super.addEventListener(e,r,n)}removeEventListener(e,r,n){if(super.removeEventListener(e,r,n),this.$$c){let i=this.$$l_u.get(r);i&&(i(),this.$$l_u.delete(r))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(i){return s=>{let o=document.createElement("slot");i!=="default"&&(o.name=i),Qe(s,o)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let r={},n=Na(this);for(let i of this.$$s)i in n&&(i==="default"&&!this.$$d.children?(this.$$d.children=e(i),r.default=!0):r[i]=e(i));for(let i of this.attributes){let s=this.$$g_p(i.name);s in this.$$d||(this.$$d[s]=Ti(s,i.value,this.$$p_d,"toProp"))}for(let i in this.$$p_d)!(i in this.$$d)&&this[i]!==void 0&&(this.$$d[i]=this[i],delete this[i]);this.$$c=fo({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:r,$$host:this}}),this.$$me=fn(()=>{X(()=>{var i;this.$$r=!0;for(let s of Nn(this.$$c)){if(!((i=this.$$p_d[s])!=null&&i.reflect))continue;this.$$d[s]=this.$$c[s];let o=Ti(s,this.$$d[s],this.$$p_d,"toAttribute");o==null?this.removeAttribute(this.$$p_d[s].attribute||s):this.setAttribute(this.$$p_d[s].attribute||s,o)}this.$$r=!1})});for(let i in this.$$l)for(let s of this.$$l[i]){let o=this.$$c.$on(i,s);this.$$l_u.set(s,o)}this.$$l={}}}attributeChangedCallback(e,r,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Ti(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(e){return Nn(this.$$p_d).find(r=>this.$$p_d[r].attribute===e||!this.$$p_d[r].attribute&&r.toLowerCase()===e)||e}});function Ti(t,e,r,n){var s;let i=(s=r[t])==null?void 0:s.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!r[t])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e==null?null:e;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function Na(t){let e={};return t.childNodes.forEach(r=>{e[r.slot||"default"]=!0}),e}function gn(t){S===null&&en("onMount"),Je&&S.l!==null?Ma(S).m.push(t):nr(()=>{let e=R(t);if(typeof e=="function")return e})}function Ma(t){var r;var e=t.l;return(r=e.u)!=null?r:e.u={a:[],b:[],m:[]}}function Pr(t,e,r){if(t==null)return e(void 0),r&&r(void 0),z;let n=R(()=>t.subscribe(e,r));return n.unsubscribe?()=>n.unsubscribe():n}var cr=[];function uo(t,e){return{subscribe:H(t,e).subscribe}}function H(t,e=z){let r=null,n=new Set;function i(a){if(Gt(t,a)&&(t=a,r)){let l=!cr.length;for(let f of n)f[1](),cr.push(f,t);if(l){for(let f=0;f<cr.length;f+=2)cr[f][0](cr[f+1]);cr.length=0}}}function s(a){i(a(t))}function o(a,l=z){let f=[a,l];return n.add(f),n.size===1&&(r=e(i,s)||z),a(t),()=>{n.delete(f),n.size===0&&r&&(r(),r=null)}}return{set:i,update:s,subscribe:o}}function It(t,e,r){let n=!Array.isArray(t),i=n?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");let s=e.length<2;return uo(r,(o,a)=>{let l=!1,f=[],c=0,u=z,d=()=>{if(c)return;u();let _=e(n?f[0]:f,o,a);s?o(_):u=typeof _=="function"?_:z},p=i.map((_,h)=>Pr(_,b=>{f[h]=b,c&=~(1<<h),l&&d()},()=>{c|=1<<h}));return l=!0,d(),function(){ct(p),u(),l=!1}})}function I(t){let e;return Pr(t,r=>e=r)(),e}var Qa=0,po=new WeakMap,Be=class t{constructor({deserialize:e}={}){this.id=Qa++,this.deserialize=e||(()=>{throw new Error("This node type doesn't define a deserialize function")})}static string(){return new t({deserialize:e=>e})}static number(){return new t({deserialize:Number})}static flag(){return new t({deserialize:()=>!0})}set(e,r){return e[this.id]=r,e}add(e){return typeof e!="function"&&(e=oe.match(e)),r=>{let n=e(r);return n===void 0?null:[this,n]}}};Be.closedBy=new Be({deserialize:t=>t.split(" ")});Be.openedBy=new Be({deserialize:t=>t.split(" ")});Be.group=new Be({deserialize:t=>t.split(" ")});var qa=Object.create(null),oe=class t{constructor(e,r,n,i=0){this.name=e,this.props=r,this.id=n,this.flags=i}static define(e){let r=e.props&&e.props.length?Object.create(null):qa,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new t(e.name||"",r,e.id,n);if(e.props)for(let s of e.props)Array.isArray(s)||(s=s(i)),s&&s[0].set(r,s[1]);return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let r=this.prop(Be.group);return r?r.indexOf(e)>-1:!1}return this.id==e}static match(e){let r=Object.create(null);for(let n in e)for(let i of n.split(" "))r[i]=e[n];return n=>{for(let i=n.prop(Be.group),s=-1;s<(i?i.length:0);s++){let o=r[s<0?n.name:i[s]];if(o)return o}}}};oe.none=new oe("",Object.create(null),0,8);var Rr=class t{constructor(e){this.types=e;for(let r=0;r<e.length;r++)if(e[r].id!=r)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let r=[];for(let n of this.types){let i=null;for(let s of e){let o=s(n);o&&(i||(i=Object.assign({},n.props)),o[0].set(i,o[1]))}r.push(i?new oe(n.name,i,n.id,n.flags):n)}return new t(r)}},se=class{constructor(e,r,n,i){this.type=e,this.children=r,this.positions=n,this.length=i}toString(){let e=this.children.map(r=>r.toString()).join();return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(e,r=0){let n=e!=null&&po.get(this)||this.topNode,i=new zt(n);return e!=null&&(i.moveTo(e,r),po.set(this,i._tree)),i}fullCursor(){return new zt(this.topNode,!0)}get topNode(){return new Ar(this,0,0,null)}resolve(e,r=0){return this.cursor(e,r).node}iterate(e){let{enter:r,leave:n,from:i=0,to:s=this.length}=e;for(let o=this.cursor();;){let a=!1;if(o.from<=s&&o.to>=i&&(o.type.isAnonymous||r(o.type,o.from,o.to)!==!1)){if(o.firstChild())continue;o.type.isAnonymous||(a=!0)}for(;a&&n&&n(o.type,o.from,o.to),a=o.type.isAnonymous,!o.nextSibling();){if(!o.parent())return;a=!0}}}balance(e=1024){return this.children.length<=Ri?this:Ai(this.type,oe.none,this.children,this.positions,0,this.children.length,0,e,this.length,0)}static build(e){return Ba(e)}};se.empty=new se(oe.none,[],[],0);function ki(t,e){return e&&(t.contextHash=e),t}var xt=class{constructor(e,r,n,i=oe.none){this.buffer=e,this.length=r,this.set=n,this.type=i}toString(){let e=[];for(let r=0;r<this.buffer.length;)e.push(this.childString(r)),r=this.buffer[r+3];return e.join(",")}childString(e){let r=this.buffer[e],n=this.buffer[e+3],i=this.set.types[r],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,n==e)return s;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,r,n,i){let{buffer:s}=this,o=-1;for(let a=e;a!=r;a=s[a+3])if(i!=-1e8){let l=s[a+1],f=s[a+2];if(n>0){if(f>i&&(o=a),f>i)break}else if(l<i&&(o=a),f>=i)break}else if(o=a,n>0)break;return o}},Ar=class t{constructor(e,r,n,i){this.node=e,this.from=r,this.index=n,this._parent=i}get type(){return this.node.type}get name(){return this.node.type.name}get to(){return this.from+this.node.length}nextChild(e,r,n,i=!1){for(let s=this;;){for(let{children:o,positions:a}=s.node,l=r>0?o.length:-1;e!=l;e+=r){let f=o[e],c=a[e]+s.from;if(!(n!=-1e8&&(r<0?c>=n:c+f.length<=n))){if(f instanceof xt){let u=f.findChild(0,f.buffer.length,r,n==-1e8?-1e8:n-c);if(u>-1)return new Nr(new ji(s,f,e,c),null,u)}else if(i||!f.type.isAnonymous||Pi(f)){let u=new t(f,c,e,s);return i||!u.type.isAnonymous?u:u.nextChild(r<0?f.children.length-1:0,r,n)}}}if(i||!s.type.isAnonymous||(e=s.index+r,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,-1e8)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,-1e8)}childAfter(e){return this.nextChild(0,1,e)}childBefore(e){return this.nextChild(this.node.children.length-1,-1,e)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent?this._parent.nextChild(this.index+1,1,-1):null}get prevSibling(){return this._parent?this._parent.nextChild(this.index-1,-1,-1):null}get cursor(){return new zt(this)}resolve(e,r=0){return this.cursor.moveTo(e,r).node}getChild(e,r=null,n=null){let i=xn(this,e,r,n);return i.length?i[0]:null}getChildren(e,r=null,n=null){return xn(this,e,r,n)}toString(){return this.node.toString()}};function xn(t,e,r,n){let i=t.cursor,s=[];if(!i.firstChild())return s;if(r!=null){for(;!i.type.is(r);)if(!i.nextSibling())return s}for(;;){if(n!=null&&i.type.is(n))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return n==null?s:[]}}var ji=class{constructor(e,r,n,i){this.parent=e,this.buffer=r,this.index=n,this.start=i}},Nr=class t{constructor(e,r,n){this.context=e,this._parent=r,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,r){let{buffer:n}=this.context,i=n.findChild(this.index+4,n.buffer[this.index+3],e,r==-1e8?-1e8:r-this.context.start);return i<0?null:new t(this.context,this,i)}get firstChild(){return this.child(1,-1e8)}get lastChild(){return this.child(-1,-1e8)}childAfter(e){return this.child(1,e)}childBefore(e){return this.child(-1,e)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,-1)}get nextSibling(){let{buffer:e}=this.context,r=e.buffer[this.index+3];return r<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new t(this.context,this._parent,r):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,r=this._parent?this._parent.index+4:0;return this.index==r?this.externalSibling(-1):new t(this.context,this._parent,e.findChild(r,this.index,-1,-1e8))}get cursor(){return new zt(this)}resolve(e,r=0){return this.cursor.moveTo(e,r).node}toString(){return this.context.buffer.childString(this.index)}getChild(e,r=null,n=null){let i=xn(this,e,r,n);return i.length?i[0]:null}getChildren(e,r=null,n=null){return xn(this,e,r,n)}},zt=class{constructor(e,r=!1){if(this.full=r,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ar)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,r){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=r||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof Ar?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enter(e,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree.node.children.length-1:0,e,r,this.full));let{buffer:n}=this.buffer,i=n.findChild(this.index+4,n.buffer[this.index+3],e,r==-1e8?-1e8:r-this.buffer.start);return i<0?!1:(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enter(1,-1e8)}lastChild(){return this.enter(-1,-1e8)}childAfter(e){return this.enter(1,e)}childBefore(e){return this.enter(-1,e)}parent(){if(!this.buffer)return this.yieldNode(this.full?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.full?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree._parent.nextChild(this._tree.index+e,e,-1e8,this.full)):!1;let{buffer:r}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(r.findChild(i,this.index,-1,-1e8))}else{let i=r.buffer[this.index+3];if(i<(n<0?r.buffer.length:r.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,-1e8,this.full)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let r,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:r,parent:n}=i)}else({index:r,_parent:n}=this._tree);for(;n;{index:r,_parent:n}=n)for(let s=r+e,o=e<0?-1:n.node.children.length;s!=o;s+=e){let a=n.node.children[s];if(this.full||!a.type.isAnonymous||a instanceof xt||Pi(a))return!1}return!0}move(e){if(this.enter(e,-1e8))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){return this.move(1)}prev(){return this.move(-1)}moveTo(e,r=0){for(;(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e))&&this.parent(););for(;!(r<0?!this.childBefore(e):!this.childAfter(e));)if(this.from==this.to||(r<1?this.from>=e:this.from>e)||(r>-1?this.to<=e:this.to<e)){this.parent();break}return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,r=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;r=o,n=s+1;break e}i=this.stack[--s]}for(let i=n;i<this.stack.length;i++)r=new Nr(this.buffer,r,this.stack[i]);return this.bufferNode=new Nr(this.buffer,r,this.index)}get tree(){return this.buffer?null:this._tree.node}};function Pi(t){return t.children.some(e=>!e.type.isAnonymous||e instanceof xt||Pi(e))}var Ci=class t{constructor(e,r){this.buffer=e,this.index=r}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new t(this.buffer,this.index)}},Ri=8;function Ba(t){var e;let{buffer:r,nodeSet:n,topID:i=0,maxBufferLength:s=1024,reused:o=[],minRepeatType:a=n.types.length}=t,l=Array.isArray(r)?new Ci(r,r.length):r,f=n.types,c=0;function u($,k,v,P,x){let{id:E,start:Q,end:g,size:C}=l,A=Q-$;if(C<0){C==-1?(v.push(o[E]),P.push(A)):c=E,l.next();return}let M=f[E],D,V;if(g-Q<=s&&(V=d(l.pos-k,x))){let ve=new Uint16Array(V.size-V.skip),U=l.pos-V.size,K=ve.length;for(;l.pos>U;)K=p(V.start,ve,K,x);D=new xt(ve,g-V.start,n,x<0?oe.none:f[x]),A=V.start-$}else{let ve=l.pos-C;l.next();let U=[],K=[],ge=E>=a?E:-1;for(;l.pos>ve;)l.id==ge?l.next():u(Q,ve,U,K,ge);U.reverse(),K.reverse(),ge>-1&&U.length>Ri?D=Ai(M,M,U,K,0,U.length,0,s,g-Q,c):D=ki(new se(M,U,K,g-Q),c)}v.push(D),P.push(A)}function d($,k){let v=l.fork(),P=0,x=0,E=0,Q=v.end-s,g={size:0,start:0,skip:0};e:for(let C=v.pos-$;v.pos>C;){if(v.id==k){g.size=P,g.start=x,g.skip=E,E+=4,P+=4,v.next();continue}let A=v.size,M=v.pos-A;if(A<0||M<C||v.start<Q)break;let D=v.id>=a?4:0,V=v.start;for(v.next();v.pos>M;){if(v.size<0)break e;v.id>=a&&(D+=4),v.next()}x=V,P+=A,E+=D}return(k<0||P==$)&&(g.size=P,g.start=x,g.skip=E),g.size>4?g:void 0}function p($,k,v,P){let{id:x,start:E,end:Q,size:g}=l;if(l.next(),x==P)return v;let C=v;if(g>4){let A=l.pos-(g-4);for(;l.pos>A;)v=p($,k,v,P)}return x<a&&(k[--v]=C,k[--v]=Q-$,k[--v]=E-$,k[--v]=x),v}let _=[],h=[];for(;l.pos>0;)u(t.start||0,0,_,h,-1);let b=(e=t.length)!==null&&e!==void 0?e:_.length?h[0]+_[0].length:0;return new se(f[i],_.reverse(),h.reverse(),b)}function Ai(t,e,r,n,i,s,o,a,l,f){let c=[],u=[];if(l<=a)for(let d=i;d<s;d++)c.push(r[d]),u.push(n[d]-o);else{let d=Math.max(a,Math.ceil(l*1.5/Ri));for(let p=i;p<s;){let _=p,h=n[p];for(p++;p<s&&!(n[p]+r[p].length-h>d);p++);if(p==_+1){let b=r[_];if(b instanceof se&&b.type==e&&b.length>d<<1){for(let $=0;$<b.children.length;$++)c.push(b.children[$]),u.push(b.positions[$]+h-o);continue}c.push(b)}else if(p==_+1)c.push(r[_]);else{let b=Ai(e,e,r,n,_,p,h,a,n[p-1]+r[p-1].length-h,f);e!=oe.none&&!Va(b.children,e)&&(b=ki(new se(oe.none,b.children,b.positions,b.length),f)),c.push(b)}u.push(h-o)}}return ki(new se(t,c,u,l),f)}function Va(t,e){for(let r of t)if(r.type==e)return!0;return!1}function Ni(t){return new Si(t)}var Si=class t{constructor(e,r=e.length){this.string=e,this.length=r}get(e){return e<0||e>=this.length?-1:this.string.charCodeAt(e)}lineAfter(e){if(e<0)return"";let r=this.string.indexOf(`
`,e);return this.string.slice(e,r<0?this.length:Math.min(r,this.length))}read(e,r){return this.string.slice(e,Math.min(this.length,r))}clip(e){return new t(this.string,e)}};var Fi=class t{constructor(e,r,n,i,s,o,a,l,f,c){this.p=e,this.stack=r,this.state=n,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=f,this.parent=c}toString(){return`[${this.stack.filter((e,r)=>r%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,r,n=0){let i=e.parser.context;return new t(e,[],r,n,n,0,[],0,i?new bn(i,i.start):null,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,r){this.stack.push(this.state,r,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let r=e>>19,n=e&65535,{parser:i}=this.p,s=i.dynamicPrecedence(n);if(s&&(this.score+=s),r==0){n<i.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),this.pushState(i.getGoto(this.state,n,!0),this.reducePos),this.reduceContext(n);return}let o=this.stack.length-(r-1)*3-(e&262144?6:0),a=this.stack[o-2],l=this.stack[o-1],f=this.bufferBase+this.buffer.length-l;if(n<i.minRepeatTerm||e&131072){let c=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,a,c,f+4,!0)}if(e&262144)this.state=this.stack[o];else{let c=this.stack[o-3];this.state=i.getGoto(c,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n)}storeNode(e,r,n,i=4,s=!1){if(e==0){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(r==n)return;if(o.buffer[a-2]>=r){o.buffer[a-2]=n;return}}}if(!s||this.pos==n)this.buffer.push(e,r,n,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>n;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4);this.buffer[o]=e,this.buffer[o+1]=r,this.buffer[o+2]=n,this.buffer[o+3]=i}}shift(e,r,n){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)r<=this.p.parser.maxNode&&this.buffer.push(r,this.pos,n,4),this.pos=n;else{let i=this.pos,s=e,{parser:o}=this.p;(n>this.pos||r<=o.maxNode)&&(this.pos=n,o.stateFlag(s,1)||(this.reducePos=n)),this.pushState(s,i),r<=o.maxNode&&this.buffer.push(r,i,n,4),this.shiftContext(r)}}apply(e,r,n){e&65536?this.reduce(e):this.shift(e,r,n)}useNode(e,r){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(r,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this.p.input,this))}split(){let e=this,r=e.buffer.length;for(;r>0&&e.buffer[r-2]>e.reducePos;)r-=4;let n=e.buffer.slice(r),i=e.bufferBase+r;for(;e&&i==e.bufferBase;)e=e.parent;return new t(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,e)}recoverByDelete(e,r){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,r),this.storeNode(0,this.pos,r,n?8:4),this.pos=this.reducePos=r,this.score-=200}canShift(e){for(let r=new Ii(this);;){let n=this.p.parser.stateSlot(r.top,4)||this.p.parser.hasAction(r.top,e);if(!(n&65536))return!0;if(n==0)return!1;r.reduce(n)}}get ruleStart(){for(let e=this.state,r=this.stack.length;;){let n=this.p.parser.stateSlot(e,5);if(!(n&65536))return 0;if(r-=3*(n>>19),(n&65535)<this.p.parser.minRepeatTerm)return this.stack[r+1];e=this.stack[r]}}startOf(e,r){let n=this.state,i=this.stack.length,{parser:s}=this.p;for(;;){let o=s.stateSlot(n,5),a=o>>19,l=o&65535;if(e.indexOf(l)>-1){let f=i-3*(o>>19),c=this.stack[f+1];if(r==null||r>c)return c}if(i==0)return null;a==0?(i-=3,n=this.stack[i]):(i-=3*(a-1),n=s.getGoto(this.stack[i-3],l,!0))}}recoverByInsert(e){if(this.stack.length>=300)return[];let r=this.p.parser.nextStates(this.state);if(r.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<r.length;s+=2)(o=r[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(r[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<r.length;s+=2){let o=r[s+1];i.some((a,l)=>l&1&&a==o)||i.push(r[s],o)}r=i}let n=[];for(let i=0;i<r.length&&n.length<4;i+=2){let s=r[i+1];if(s==this.state)continue;let o=this.split();o.storeNode(0,o.pos,o.pos,4,!0),o.pushState(s,this.pos),o.shiftContext(r[i]),o.score-=200,n.push(o)}return n}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);return e&65536?(this.p.parser.validAction(this.state,e)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100),this.reduce(e),!0):!1}forceAll(){for(;!this.p.parser.stateFlag(this.state,2)&&this.forceReduce(););return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let r=0;r<this.stack.length;r+=3)if(this.stack[r]!=e.stack[r])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this.p.input,this))}reduceContext(e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this.p.input,this))}emitContext(){let e=this.curContext;if(!e.tracker.strict)return;let r=this.buffer.length-1;(r<0||this.buffer[r]!=-2)&&this.buffer.push(e.hash,this.reducePos,this.reducePos,-2)}updateContext(e){if(e!=this.curContext.context){let r=new bn(this.curContext.tracker,e);r.hash!=this.curContext.hash&&this.emitContext(),this.curContext=r}}},bn=class{constructor(e,r){this.tracker=e,this.context=r,this.hash=e.hash(r)}},ho;(function(t){t[t.Token=200]="Token",t[t.Reduce=100]="Reduce",t[t.MaxNext=4]="MaxNext",t[t.MaxInsertStackDepth=300]="MaxInsertStackDepth",t[t.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(ho||(ho={}));var Ii=class{constructor(e){this.stack=e,this.top=e.state,this.rest=e.stack,this.offset=this.rest.length}reduce(e){let r=e&65535,n=e>>19;n==0?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=(n-1)*3;let i=this.stack.p.parser.getGoto(this.rest[this.offset-3],r,!0);this.top=i}},zi=class t{constructor(e,r,n){this.stack=e,this.pos=r,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e){return new t(e,e.bufferBase+e.buffer.length,e.buffer.length)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new t(this.stack,this.pos,this.index)}},yn=class{constructor(){this.start=-1,this.value=-1,this.end=-1}accept(e,r){this.value=e,this.end=r}},Mt=class{constructor(e,r){this.data=e,this.id=r}token(e,r,n){Ya(this.data,e,r,n,this.id)}};Mt.prototype.contextual=Mt.prototype.fallback=Mt.prototype.extend=!1;function Ya(t,e,r,n,i){let s=0,o=1<<i,a=n.p.parser.dialect;e:for(let l=r.start;o&t[s];){let f=t[s+1];for(let u=s+3;u<f;u+=2)if((t[u+1]&o)>0){let d=t[u];if(a.allows(d)&&(r.value==-1||r.value==d||n.p.parser.overrides(d,r.value))){r.accept(d,l);break}}let c=e.get(l++);for(let u=0,d=t[s+2];u<d;){let p=u+d>>1,_=f+p+(p<<1),h=t[_],b=t[_+1];if(c<h)d=p;else if(c>=b)u=p+1;else{s=t[_+2];continue e}}break}}function Dr(t,e=Uint16Array){if(typeof t!="string")return t;let r=null;for(let n=0,i=0;n<t.length;){let s=0;for(;;){let o=t.charCodeAt(n++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}r?r[i++]=s:r=new e(s)}return r}var Ae=typeof process!="undefined"&&/\bparse\b/.test(process.env.LOG),Di=null;function _o(t,e,r){let n=t.cursor(e);for(;;)if(!(r<0?n.childBefore(e):n.childAfter(e)))for(;;){if((r<0?n.to<e:n.from>e)&&!n.type.isError)return r<0?Math.max(0,Math.min(n.to-1,e-5)):Math.min(t.length,Math.max(n.from+1,e+5));if(r<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return r<0?0:t.length}}var Li=class{constructor(e){this.fragments=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?_o(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?_o(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let r=this.trees.length-1;if(r<0)return this.nextFragment(),null;let n=this.trees[r],i=this.index[r];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=n.children[i],o=this.start[r]+n.positions[i];if(o>e)return this.nextStart=o,null;if(o==e&&o+s.length<=this.safeTo)return o==e&&o>=this.safeFrom?s:null;s instanceof xt?(this.index[r]++,this.nextStart=o+s.length):(this.index[r]++,o+s.length>=e&&(this.trees.push(s),this.start.push(o),this.index.push(0)))}}},Mi=class extends yn{constructor(){super(...arguments),this.extended=-1,this.mask=0,this.context=0}clear(e){this.start=e,this.value=this.extended=-1}},Lt=new yn,Qi=class{constructor(e){this.tokens=[],this.mainToken=Lt,this.actions=[],this.tokens=e.tokenizers.map(r=>new Mi)}getActions(e,r){let n=0,i=null,{parser:s}=e.p,{tokenizers:o}=s,a=s.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0;for(let f=0;f<o.length;f++){if(!(1<<f&a))continue;let c=o[f],u=this.tokens[f];if(!(i&&!c.fallback)&&((c.contextual||u.start!=e.pos||u.mask!=a||u.context!=l)&&(this.updateCachedToken(u,c,e,r),u.mask=a,u.context=l),u.value!=0)){let d=n;if(u.extended>-1&&(n=this.addActions(e,u.extended,u.end,n)),n=this.addActions(e,u.value,u.end,n),!c.extend&&(i=u,n>d))break}}for(;this.actions.length>n;)this.actions.pop();return i||(i=Lt,i.start=e.pos,e.pos==r.length?i.accept(e.p.parser.eofTerm,e.pos):i.accept(0,e.pos+1)),this.mainToken=i,this.actions}updateCachedToken(e,r,n,i){if(e.clear(n.pos),r.token(i,e,n),e.value>-1){let{parser:s}=n.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](i.read(e.start,e.end),n);if(a>=0&&n.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else n.pos==i.length?e.accept(n.p.parser.eofTerm,n.pos):e.accept(0,n.pos+1)}putAction(e,r,n,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=r,this.actions[i++]=n,i}addActions(e,r,n,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let f=o.stateSlot(s,l?2:1);;f+=3){if(a[f]==65535)if(a[f+1]==1)f=at(a,f+2);else{i==0&&a[f+1]==2&&(i=this.putAction(at(a,f+1),r,n,i));break}a[f]==r&&(i=this.putAction(at(a,f+1),r,n,i))}return i}},mo;(function(t){t[t.Distance=5]="Distance",t[t.MaxRemainingPerStep=3]="MaxRemainingPerStep",t[t.MinBufferLengthPrune=200]="MinBufferLengthPrune",t[t.ForceReduceLimit=10]="ForceReduceLimit"})(mo||(mo={}));var wn=class{constructor(e,r,n,i){this.parser=e,this.input=r,this.startPos=n,this.context=i,this.pos=0,this.recovering=0,this.nextStackID=9812,this.nested=null,this.nestEnd=0,this.nestWrap=null,this.reused=[],this.tokens=new Qi(e),this.topTerm=e.top[1],this.stacks=[Fi.start(this,e.top[0],this.startPos)];let s=i==null?void 0:i.fragments;this.fragments=s&&s.length?new Li(s):null}advance(){if(this.nested){let a=this.nested.advance();return this.pos=this.nested.pos,a&&(this.finishNested(this.stacks[0],a),this.nested=null),null}let e=this.stacks,r=this.pos,n=this.stacks=[],i,s,o;for(let a=0;a<e.length;a++){let l=e[a],f;for(;;){if(l.pos>r)n.push(l);else if(f=this.checkNest(l))(!o||o.stack.score<l.score)&&(o=f);else{if(this.advanceStack(l,n,e))continue;{i||(i=[],s=[]),i.push(l);let c=this.tokens.mainToken;s.push(c.value,c.end)}}break}}if(o)return this.startNested(o),null;if(!n.length){let a=i&&Ua(i);if(a)return this.stackToTree(a);if(this.parser.strict)throw Ae&&i&&console.log("Stuck with token "+this.parser.getName(this.tokens.mainToken.value)),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=this.runRecovery(i,s,n);if(a)return this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(n.length>a)for(n.sort((l,f)=>f.score-l.score);n.length>a;)n.pop();n.some(l=>l.reducePos>r)&&this.recovering--}else if(n.length>1)e:for(let a=0;a<n.length-1;a++){let l=n[a];for(let f=a+1;f<n.length;f++){let c=n[f];if(l.sameState(c)||l.buffer.length>200&&c.buffer.length>200)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)n.splice(f--,1);else{n.splice(a--,1);continue e}}}this.pos=n[0].pos;for(let a=1;a<n.length;a++)n[a].pos<this.pos&&(this.pos=n[a].pos);return null}advanceStack(e,r,n){let i=e.pos,{input:s,parser:o}=this,a=Ae?this.stackID(e)+" -> ":"";if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let d=this.fragments.nodeAt(i);d;){let p=this.parser.nodeSet.types[d.type.id]==d.type?o.getGoto(e.state,d.type.id):-1;if(p>-1&&d.length&&(!c||(d.contextHash||0)==u))return e.useNode(d,p),Ae&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(d.type.id)})`),!0;if(!(d instanceof se)||d.children.length==0||d.positions[0]>0)break;let _=d.children[0];if(_ instanceof se)d=_;else break}}let l=o.stateSlot(e.state,4);if(l>0)return e.reduce(l),Ae&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(l&65535)})`),!0;let f=this.tokens.getActions(e,s);for(let c=0;c<f.length;){let u=f[c++],d=f[c++],p=f[c++],_=c==f.length||!n,h=_?e:e.split();if(h.apply(u,d,p),Ae&&console.log(a+this.stackID(h)+` (via ${u&65536?`reduce of ${o.getName(u&65535)}`:"shift"} for ${o.getName(d)} @ ${i}${h==e?"":", split"})`),_)return!0;h.pos>i?r.push(h):n.push(h)}return!1}advanceFully(e,r){let n=e.pos;for(;;){let i=this.checkNest(e);if(i)return i;if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return vo(e,r),!0}}runRecovery(e,r,n){let i=null,s=!1,o;for(let a=0;a<e.length;a++){let l=e[a],f=r[a<<1],c=r[(a<<1)+1],u=Ae?this.stackID(l)+" -> ":"";if(l.deadEnd){if(s)continue;s=!0,l.restart(),Ae&&console.log(u+this.stackID(l)+" (restarted)");let _=this.advanceFully(l,n);if(_){_!==!0&&(o=_);continue}}let d=l.split(),p=u;for(let _=0;d.forceReduce()&&_<10;_++){Ae&&console.log(p+this.stackID(d)+" (via force-reduce)");let h=this.advanceFully(d,n);if(h){h!==!0&&(o=h);break}Ae&&(p=this.stackID(d)+" -> ")}for(let _ of l.recoverByInsert(f))Ae&&console.log(u+this.stackID(_)+" (via recover-insert)"),this.advanceFully(_,n);this.input.length>l.pos?(c==l.pos&&(c++,f=0),l.recoverByDelete(f,c),Ae&&console.log(u+this.stackID(l)+` (via recover-delete ${this.parser.getName(f)})`),vo(l,n)):(!i||i.score<l.score)&&(i=l)}if(i)return i;if(o){for(let a of this.stacks)if(a.score>o.stack.score){o=void 0;break}}return o&&this.startNested(o),null}forceFinish(){let e=this.stacks[0].split();return this.nested&&this.finishNested(e,this.nested.forceFinish()),this.stackToTree(e.forceAll())}stackToTree(e,r=e.pos){return this.parser.context&&e.emitContext(),se.build({buffer:zi.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.startPos,length:r-this.startPos,minRepeatType:this.parser.minRepeatTerm})}checkNest(e){let r=this.parser.findNested(e.state);if(!r)return null;let n=r.value;return typeof n=="function"&&(n=n(this.input,e)),n?{stack:e,info:r,spec:n}:null}startNested(e){let{stack:r,info:n,spec:i}=e;this.stacks=[r],this.nestEnd=this.scanForNestEnd(r,n.end,i.filterEnd),this.nestWrap=typeof i.wrapType=="number"?this.parser.nodeSet.types[i.wrapType]:i.wrapType||null,i.startParse?this.nested=i.startParse(this.input.clip(this.nestEnd),r.pos,this.context):this.finishNested(r)}scanForNestEnd(e,r,n){for(let i=e.pos;i<this.input.length;i++)if(Lt.start=i,Lt.value=-1,r.token(this.input,Lt,e),Lt.value>-1&&(!n||n(this.input.read(i,Lt.end))))return i;return this.input.length}finishNested(e,r){this.nestWrap?r=new se(this.nestWrap,r?[r]:[],r?[0]:[],this.nestEnd-e.pos):r||(r=new se(oe.none,[],[],this.nestEnd-e.pos));let n=this.parser.findNested(e.state);e.useNode(r,this.parser.getGoto(e.state,n.placeholder,!0)),Ae&&console.log(this.stackID(e)+" (via unnest)")}stackID(e){let r=(Di||(Di=new WeakMap)).get(e);return r||Di.set(e,r=String.fromCodePoint(this.nextStackID++)),r+e}};function vo(t,e){for(let r=0;r<e.length;r++){let n=e[r];if(n.pos==t.pos&&n.sameState(t)){e[r].score<t.score&&(e[r]=t);return}}e.push(t)}var qi=class{constructor(e,r,n){this.source=e,this.flags=r,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}};var $n=class t{constructor(e){if(this.bufferLength=1024,this.strict=!1,this.cachedDialect=null,e.version!=13)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (13)`);let r=Dr(e.tokenData),n=e.nodeNames.split(" ");this.minRepeatTerm=n.length,this.context=e.context;for(let a=0;a<e.repeatNodeCount;a++)n.push("");let i=[];for(let a=0;a<n.length;a++)i.push([]);function s(a,l,f){i[a].push([l,l.deserialize(String(f))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];for(let f=1;f<a.length;){let c=a[f++];if(c>=0)s(c,l,a[f++]);else{let u=a[f+-c];for(let d=-c;d>0;d--)s(a[f++],l,u);f++}}}if(this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let a=0;a<e.specialized.length;a++)this.specialized[a]=e.specialized[a].term,this.specializers[a]=e.specialized[a].get;this.states=Dr(e.states,Uint32Array),this.data=Dr(e.stateData),this.goto=Dr(e.goto);let o=Object.keys(e.topRules).map(a=>e.topRules[a][1]);this.nodeSet=new Rr(n.map((a,l)=>oe.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:o.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Mt(r,a):a),this.topRules=e.topRules,this.nested=(e.nested||[]).map(([a,l,f,c])=>({name:a,value:l,end:new Mt(Dr(f),0),placeholder:c})),this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}parse(e,r=0,n={}){typeof e=="string"&&(e=Ni(e));let i=new wn(this,e,r,n);for(;;){let s=i.advance();if(s)return s}}startParse(e,r=0,n={}){return typeof e=="string"&&(e=Ni(e)),new wn(this,e,r,n)}getGoto(e,r,n=!1){let i=this.goto;if(r>=i[0])return-1;for(let s=i[r+1];;){let o=i[s++],a=o&1,l=i[s++];if(a&&n)return l;for(let f=s+(o>>1);s<f;s++)if(i[s]==e)return l;if(a)return-1}}hasAction(e,r){let n=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=n[s])==65535)if(n[s+1]==1)o=n[s=at(n,s+2)];else{if(n[s+1]==2)return at(n,s+2);break}if(o==r||o==0)return at(n,s+1)}return 0}stateSlot(e,r){return this.states[e*6+r]}stateFlag(e,r){return(this.stateSlot(e,0)&r)>0}findNested(e){let r=this.stateSlot(e,0);return r&4?this.nested[r>>10]:null}validAction(e,r){if(r==this.stateSlot(e,4))return!0;for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=at(this.data,n+2);else return!1;if(r==at(this.data,n+1))return!0}}nextStates(e){let r=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=at(this.data,n+2);else break;if(!(this.data[n+2]&1)){let i=this.data[n+1];r.some((s,o)=>o&1&&s==i)||r.push(this.data[n],i)}}return r}overrides(e,r){let n=go(this.data,this.tokenPrecTable,r);return n<0||go(this.data,this.tokenPrecTable,e)<n}configure(e){let r=Object.assign(Object.create(t.prototype),this);if(e.props&&(r.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);r.top=n}return e.tokenizers&&(r.tokenizers=this.tokenizers.map(n=>{let i=e.tokenizers.find(s=>s.from==n);return i?i.to:n})),e.dialect&&(r.dialect=this.parseDialect(e.dialect)),e.nested&&(r.nested=this.nested.map(n=>Object.prototype.hasOwnProperty.call(e.nested,n.name)?{name:n.name,value:e.nested[n.name],end:n.end,placeholder:n.placeholder}:n)),e.strict!=null&&(r.strict=e.strict),e.bufferLength!=null&&(r.bufferLength=e.bufferLength),r}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get hasNested(){return this.nested.length>0}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let r=this.dynamicPrecedences;return r==null?0:r[e]||0}parseDialect(e){if(this.cachedDialect&&this.cachedDialect.source==e)return this.cachedDialect;let r=Object.keys(this.dialects),n=r.map(()=>!1);if(e)for(let s of e.split(" ")){let o=r.indexOf(s);o>=0&&(n[o]=!0)}let i=null;for(let s=0;s<r.length;s++)if(!n[s])for(let o=this.dialects[r[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return this.cachedDialect=new qi(e,n,i)}static deserialize(e){return new t(e)}};function at(t,e){return t[e]|t[e+1]<<16}function go(t,e,r){for(let n=e,i;(i=t[n])!=65535;n++)if(i==r)return n-e;return-1}function Ua(t){let e=null;for(let r of t)r.pos==r.p.input.length&&r.p.parser.stateFlag(r.state,2)&&(!e||e.score<r.score)&&(e=r);return e}var xo=$n.deserialize({version:13,states:"&rOVQPOOOOQO'#Cw'#CwO!QQPO'#CbO!QQPO'#CcO!QQPO'#CdO!QQPO'#CeO!QQPO'#CfO!]QPO'#CgO!bQPO'#ChOOQO'#Cx'#CxO#YQQO'#CiOOQO'#Cv'#CvOOQO'#Cu'#CuOVQPO'#CuO!bQPO'#CmOOQO'#Ct'#CtOOQO'#Co'#CoO#_QPO'#C^Q#lQPOOOOQO'#Cs'#CsOOQO,58|,58|OOQO,58},58}OOQO,59O,59OOOQO,59P,59POOQO,59Q,59QOOQO,59R,59ROOQO,59S,59SO#qQPO,59TO#yQPO,59aOOQO,59X,59XOOQO-E6m-E6mOVQPO,59YOOQO1G.o1G.oO$RQPO1G.oOOQO1G.{1G.{OOQO1G.t1G.tO$aQPO7+$ZOOQO'#Ck'#CkO$RQPO'#CkO$RQPO,59WOOQO<<Gu<<GuO$iQPO,59VOOQO1G.r1G.rOOQO1G.q1G.q",stateData:"%O~OfOS~ORPOSPOTPOmQOnROoSOpTOqUOrVOsWOtYOx]Oz^O~ORPOSPOTPO~ORiO~ORPOSPOTPOmQOnROoSOpTOqUOrVOsWOtYOx]O~O^kO~OdQXwQXyQX~PVOwoO~OupOvqO~OwoOyrO~ORPOSPOTPOxvO~OuxOwwO~OwwOy{O~OwTmnopqrsyRq~",goto:"$SmPPnPPPsssssss{P!T!^!cn!iPPP!q!z#Q#^#f{VcO]o]XOW]^ao]ZOW]^aoQtqQyvRzwVuqvwX_O]aoUaO]oRnaQbOQl]RsoX`O]aoW_O]aoQjWRm^][OW]^ao[ZOW]^aoQdQQeRQfSQgTQhUVuqvw",nodeNames:"\u26A0 Program And Word Quote Regex FileOperator PathOperator ContentOperator MatchCaseOperator IgnoreCaseOperator TagOperator LineOperator PropertyOperator PropertyName PropertyValueExpression PropertyValueOr Not Or",maxTerm:42,skippedNodes:[0],repeatNodeCount:1,tokenData:"!1d~RvOX#iXY&yYZ&yZ]#i]^&y^p#ipq&yqr#irs'[sx#ixy'yyz(jz}#i}!O)Z!O!P#i!P!Q)z!Q![#i![!]-h!]!q#i!q!r-m!r!}#i!}#O/y#O#P#i#P#Q0O#Q#V#i#V#W0m#W#Y#i#Y#Z9O#Z#]#i#]#^=t#^#`#i#`#aHm#a#bMc#b#d#i#d#e!)R#e#h#i#h#i!-w#i~#iR#n^^QOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q~$jR$q^^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q~$jP%rWRPOX%mZ]%m^p%mqx%mz}%m!O![%m!]#P%m#Q~%mQ&aW^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q~&[~'OSf~XY&yYZ&y]^&ypq&y~'_TOr'[rs'ns#O'[#O#P's#P~'[~'sOS~~'vPO~'[R(QWxP^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q~&[R(qW^QyPOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q~&[R)bWzP^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q~&[R*Pa^QOX)zXZ+UZ])z]^+U^p)zpq+Uqr)zrs+Us!P)z!P!Q+s!Q![)z![!]+U!]!})z!}#O+U#O#P,d#P#Q+U#Q~)zP+XTO!P+U!P!Q+h!Q#O+U#O#P+m#P~+UP+mOTPP+pPO~+UR+zW^QTPOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q~&[R,i_^QOX)zXZ+UZ])z]^+U^p)zpq+Uqr)zrs+Us![)z![!]+U!]!})z!}#O+U#O#P)z#P#Q+U#Q~)z~-mOv~R-r`^QOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!t$j!t!u.t!u!}$j!}#O%m#O#P$j#Q~$jR.}^^QwPRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q~$j~0OOt~~0TWu~OX%mZ]%m^p%mqx%mz}%m!O![%m!]#P%m#Q~%mR0r`^QOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#c$j#c#d1t#d~$jR1{`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#b$j#b#c2}#c~$jR3U`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#h$j#h#i4W#i~$jR4_`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#X$j#X#Y5a#Y~$jR5h`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#b$j#b#c6j#c~$jR6q`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#h$j#h#i7s#i~$jR7z_^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j![!]8y!]!}$j!}#O%m#O#P$j#Q~$jP9OOoPR9T`^QOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#]$j#]#^:V#^~$jR:^`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#`$j#`#a;`#a~$jR;g`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#X$j#X#Y<i#Y~$jR<p_^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j![!]=o!]!}$j!}#O%m#O#P$j#Q~$jP=tOmPR=y`^QOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#Z$j#Z#[>{#[~$jR?S`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#b$j#b#c@U#c~$jR@]`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#c$j#c#dA_#d~$jRAf`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#f$j#f#gBh#g~$jRBo`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#X$j#X#YCq#Y~$jRCx^^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!ODt!O![$j!]!}$j!}#O%m#O#P$j#Q~$jRDyY^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q#V&[#V#WEi#W~&[REnY^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q#T&[#T#UF^#U~&[RFcY^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q#g&[#g#hGR#h~&[RGWY^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q#X&[#X#YGv#Y~&[RG{X^QOX&[Z]&[^p&[qr&[s![&[![!]Hh!]!}&[#O#P&[#Q~&[PHmOqPRHr`^QOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#]$j#]#^It#^~$jRI{`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#b$j#b#cJ}#c~$jRKU`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#X$j#X#YLW#Y~$jRL__^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j![!]M^!]!}$j!}#O%m#O#P$j#Q~$jPMcOsPRMh`^QOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#T$j#T#UNj#U~$jRNq`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#h$j#h#i! s#i~$jR! z`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#V$j#V#W!!|#W~$jR!#T`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#[$j#[#]!$V#]~$jR!$^^^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O!%Y!O![$j!]!}$j!}#O%m#O#P$j#Q~$jR!%_Y^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q#V&[#V#W!%}#W~&[R!&SY^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q#T&[#T#U!&r#U~&[R!&wY^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q#g&[#g#h!'g#h~&[R!'lY^QOX&[Z]&[^p&[qr&[s![&[!]!}&[#O#P&[#Q#X&[#X#Y!([#Y~&[R!(aX^QOX&[Z]&[^p&[qr&[s![&[![!]!(|!]!}&[#O#P&[#Q~&[P!)ROpPR!)W`^QOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#T$j#T#U!*Y#U~$jR!*a`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#h$j#h#i!+c#i~$jR!+j`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#[$j#[#]!,l#]~$jR!,s_^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j![!]!-r!]!}$j!}#O%m#O#P$j#Q~$jP!-wOnPR!-|`^QOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#T$j#T#U!/O#U~$jR!/V`^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j!]!}$j!}#O%m#O#P$j#Q#Z$j#Z#[!0X#[~$jR!0`_^QRPOX$jZ]$j^p$jqr$jrs%msx$jxz&[z}$j}!O&[!O![$j![!]!1_!]!}$j!}#O%m#O#P$j#Q~$jP!1dOrP",tokenizers:[0,1],topRules:{Program:[0,1]},tokenPrec:171});var Bi=Fo(require("assert"));function Ga(t,e){let r=[];if(!e.firstChild())return async()=>!0;for(r.push(qt(t,e));e.nextSibling();)r.push(qt(t,e));return e.parent(),async n=>(await Promise.all(r.map(i=>i(n)))).every(Boolean)}function Wa(t,e){let r=[];if(!e.firstChild())return async()=>!0;for(r.push(qt(t,e));e.nextSibling();)r.push(qt(t,e));return e.parent(),async n=>(await Promise.all(r.map(i=>i(n)))).some(Boolean)}function On(t,e){if(e.firstChild(),e.node.type.name==="PropertyValueOr"){let n=[];for(e.firstChild(),n.push(On(t,e));e.nextSibling();)n.push(On(t,e));return e.parent(),e.parent(),async i=>(await Promise.all(n.map(s=>s(i)))).some(Boolean)}if(e.node.type.name==="PropertyValueExpression"){let n=On(t,e);return e.parent(),n}let r=Qt(t,e);return e.parent(),async({key:n,frontmatter:i,caseSensitive:s})=>!!(i&&await r({content:i[n],caseSensitive:s}))}function Qt(t,e){if(e.node.type.name==="Word"||e.node.type.name==="Quote"){let r=e.node.type.name==="Quote"?t.slice(e.node.from+1,e.node.to-1):t.slice(e.node.from,e.node.to);return async({file:n,content:i,caseSensitive:s})=>!!(i&&(s?i.includes(r):i.toLowerCase().includes(r.toLowerCase())))||!!(n&&n.name&&(s?n.name.includes(r):n.name.toLowerCase().includes(r.toLowerCase())))}if(e.node.type.name==="Regex"){let r=t.slice(e.node.from+1,e.node.to-1),n=new RegExp(r);return async({file:i,content:s})=>!!(s&&n.test(s))||!!(i&&i.name&&n.test(i.name))}if(e.node.type.name==="FileOperator"){if(!e.firstChild())return async()=>!0;let r=Qt(t,e);return e.parent(),async({file:n,caseSensitive:i})=>!!(n&&n.name&&await r({content:n.name,caseSensitive:i}))}if(e.node.type.name==="PathOperator"){if(!e.firstChild())return async()=>!0;let r=Qt(t,e);return e.parent(),async({file:n,caseSensitive:i})=>!!(n&&n.path&&await r({content:n.path,caseSensitive:i}))}if(e.node.type.name==="ContentOperator"){if(!e.firstChild())return async()=>!0;let r=Qt(t,e);return e.parent(),async({content:n,caseSensitive:i})=>!!(n&&await r({content:n,caseSensitive:i}))}if(e.node.type.name==="MatchCaseOperator"){if(!e.firstChild())return async()=>!0;let r=Qt(t,e);return e.parent(),async({content:n})=>!!(n&&await r({content:n,caseSensitive:!0}))}if(e.node.type.name==="IgnoreCaseOperator"){if(!e.firstChild())return async()=>!0;let r=Qt(t.toLowerCase(),e);return e.parent(),async({content:n})=>!!(n&&r({content:n.toLowerCase()}))}if(e.node.type.name==="TagOperator"){let r=t.slice(e.node.from,e.node.to).replace(/^tag:/,"").replace(/^#/,"");return async({tags:n,caseSensitive:i})=>!!(n&&(i?n.includes(r):n.map(s=>s.toLowerCase()).includes(r.toLowerCase())))}if(e.node.type.name==="LineOperator"){if(!e.firstChild())return async()=>!0;let r=qt(t,e);return e.parent(),async({content:n,caseSensitive:i})=>!!(n&&(await Promise.all(n.split(`
`).map(s=>r({content:s,caseSensitive:i})))).some(Boolean))}if(e.node.type.name==="PropertyOperator"){if(!e.firstChild())return async()=>!0;(0,Bi.default)(e.node.type.name==="PropertyName");let r=t.slice(e.node.from,e.node.to),n=async()=>!0;return e.nextSibling()&&((0,Bi.default)(e.node.type.name==="PropertyValueExpression"),n=On(t,e)),e.parent(),async({frontmatter:i,caseSensitive:s})=>{if(!i)return!1;let o=Object.keys(i).filter(a=>s?a.includes(r):a.toLowerCase().includes(r.toLowerCase()));return o.length===0?!1:(await Promise.all(o.map(async a=>n({key:a,frontmatter:i,caseSensitive:s})))).some(Boolean)}}return e.parent(),async()=>!0}function qt(t,e){if(e.node.type.name==="And")return Ga(t,e);if(e.node.type.name==="Or")return Wa(t,e);if(e.node.type.name==="Not"){e.firstChild();let r=qt(t,e);return e.parent(),async n=>!await r(n)}return Qt(t,e)}function Vi(t){let r=xo.parse(t).cursor();return r.firstChild()?qt(t,r):async()=>!0}var En=H(),Yi=H(),wo=H(),Ui=H([]),de=H(),dr=H("mtime"),Za=It(de,t=>t==null?void 0:t.pinnedFiles),Ir=It([dr,Ui,Za],([t,e,r])=>[...e].sort((n,i)=>(r.includes(i.path)?1:0)-(r.includes(n.path)?1:0)||i.stat[t]-n.stat[t]),[]),Ve=H(""),Bt=H(!1),Ha=It(de,t=>t==null?void 0:t.baseQuery),Gi=It([Ha,Ve],([t,e])=>{let r=t?t+" "+e:e;return r===""?null:Vi(r)}),Xi=H(new Map);Gi.subscribe(()=>Xi.set(new Map));var bo=t=>t.path+t.stat.mtime,Fr=H(new Set),ur=H(1);async function Wi(){let t=I(Ir),e=I(Ve),r=I(Gi),n=I(wo),i=I(En),s=I(Bt);if(r===null){Fr.set(new Set),ur.set(1);return}let o=new Map,a={date:new Date,index:0};for(let l=0;l<t.length;l++){let f=t[l],c=I(Xi).get(bo(t[l]));if(c!==void 0)o.set(f,c);else{let u=await f.vault.cachedRead(f),d=((0,yo.getAllTags)(n.getFileCache(f))||[]).map(h=>h.replace(/^#/,"")),p;await i.fileManager.processFrontMatter(f,h=>{p=h});let _=await r({file:f,content:u,tags:d,frontmatter:p,caseSensitive:s});if(e!==I(Ve))return;o.set(f,_),Xi.update(h=>h.set(bo(f),_))}if(e!==I(Ve))return;l%10===0&&ur.set(l/t.length),(a.date.getTime()+200<new Date().getTime()||l===t.length-1)&&(ur.set((l+1)/t.length),Fr.update(u=>(o.forEach((d,p)=>d?u.delete(p):u.add(p)),u)),o=new Map,a={date:new Date,index:l+1})}}Gi.subscribe(()=>Wi());Ui.subscribe(()=>Wi());Bt.subscribe(()=>Wi());var $o=H(0),Xe=H([]),Ka=It(Xe,t=>{let e=t.last();return e?I(Ir).indexOf(e):0});Fr.subscribe(t=>{let e=I(Ir),r=I(Ka),i=e.slice(0,r+1).filter(a=>!t.has(a));if(i.length>50){Xe.set(i.slice(0,I(Xe).length));return}let s=e.slice(r,Math.floor(e.length*I(ur))-r-1).filter(a=>!t.has(a)),o=50-i.length;Xe.set([...i,...s.slice(0,o)])});$o.subscribe(t=>{Xe.set(I(Ir).filter(e=>!I(Fr).has(e)).slice(0,t))});Ir.subscribe(t=>{Xe.set(t.filter(e=>!I(Fr).has(e)).slice(0,I(Xe).length))});var B={files:Ui,sort:dr,searchQuery:Ve,searchCaseSensitive:Bt,displayedCount:$o,displayedFiles:Xe,app:En,view:Yi,settings:de,appCache:wo};var Zi={baseQuery:"",minCardWidth:200,launchOnStart:!1,displayTitle:"Both",pinnedFiles:[]},Tn=class extends He.PluginSettingTab{constructor(e,r){super(e,r),this.plugin=r}display(){let{containerEl:e}=this;e.empty(),new He.Setting(e).setName("Base search query").setDesc("Use this for example to exclude tags, folders or keywords from the view.").addText(r=>r.setPlaceholder('-path:"Folder name/" -tag:hidden').setValue(this.plugin.settings.baseQuery).onChange(n=>{de.update(i=>({...i,baseQuery:n}))})),new He.Setting(e).setName("Minimum card width").setDesc("Cards will not be smaller than this width (in pixels)").addText(r=>r.setPlaceholder("200").setValue(this.plugin.settings.minCardWidth.toString()).onChange(n=>{if(isNaN(parseInt(n))){new He.Notice("Invalid number");return}de.update(i=>({...i,minCardWidth:parseInt(n)}))})),new He.Setting(e).setName("Title display mode").setDesc("What to display on cards starting with a # Level 1 title").addDropdown(r=>r.addOptions({Both:"Both title and filename",Title:"Title",Filename:"Filename"}).setValue(this.plugin.settings.displayTitle).onChange(n=>{de.update(i=>({...i,displayTitle:n}))})),new He.Setting(e).setName("Launch on start").setDesc("Open the cards view when Obsidian starts").addToggle(r=>r.setValue(this.plugin.settings.launchOnStart).onChange(n=>{de.update(i=>({...i,launchOnStart:n}))})),new He.Setting(e).setName("Reset settings").setDesc("Reset all settings to default").addButton(r=>r.setButtonText("Reset").onClick(()=>{de.set(Zi)}))}};var Vt=require("obsidian");var Oo="5";typeof window!="undefined"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Oo);Os();var hr=require("obsidian");var Ne=function(t){return this._sizes=[],this._columns=[],this._container=null,this._count=null,this._width=0,this._removeListener=null,this._currentGutterX=null,this._currentGutterY=null,this._resizeTimeout=null,this.conf={baseWidth:255,gutterX:null,gutterY:null,gutter:10,container:null,minify:!0,ultimateGutter:5,surroundingGutter:!0,direction:"ltr",wedge:!1},this.init(t),this};Ne.prototype.init=function(t){for(var e in this.conf)t[e]!=null&&(this.conf[e]=t[e]);if((this.conf.gutterX==null||this.conf.gutterY==null)&&(this.conf.gutterX=this.conf.gutterY=this.conf.gutter),this._currentGutterX=this.conf.gutterX,this._currentGutterY=this.conf.gutterY,this._container=typeof this.conf.container=="object"&&this.conf.container.nodeName?this.conf.container:document.querySelector(this.conf.container),!this._container)throw new Error("Container not found or missing");var r=this.resizeThrottler.bind(this);window.addEventListener("resize",r),this._removeListener=function(){window.removeEventListener("resize",r),this._resizeTimeout!=null&&(window.clearTimeout(this._resizeTimeout),this._resizeTimeout=null)},this.layout()};Ne.prototype.reset=function(){this._sizes=[],this._columns=[],this._count=null,this._width=this._container.clientWidth;var t=this.conf.baseWidth;this._width<t&&(this._width=t,this._container.style.minWidth=t+"px"),this.getCount()==1?(this._currentGutterX=this.conf.ultimateGutter,this._count=1):this._width<this.conf.baseWidth+2*this._currentGutterX?this._currentGutterX=0:this._currentGutterX=this.conf.gutterX};Ne.prototype.getCount=function(){return this.conf.surroundingGutter?Math.floor((this._width-this._currentGutterX)/(this.conf.baseWidth+this._currentGutterX)):Math.floor((this._width+this._currentGutterX)/(this.conf.baseWidth+this._currentGutterX))};Ne.prototype.computeWidth=function(){var t;return this.conf.surroundingGutter?t=(this._width-this._currentGutterX)/this._count-this._currentGutterX:t=(this._width+this._currentGutterX)/this._count-this._currentGutterX,t=Number.parseFloat(t.toFixed(2)),t};Ne.prototype.layout=function(){if(!this._container){console.error("Container not found");return}this.reset(),this._count==null&&(this._count=this.getCount());for(var t=this.computeWidth(),e=0;e<this._count;e++)this._columns[e]=0;for(var r=this._container.children,n=0;n<r.length;n++)r[n].style.width=t+"px",this._sizes[n]=r[n].clientHeight;var i;if(this.conf.direction=="ltr"?i=this.conf.surroundingGutter?this._currentGutterX:0:i=this._width-(this.conf.surroundingGutter?this._currentGutterX:0),this._count>this._sizes.length){var s=this._sizes.length*(t+this._currentGutterX)-this._currentGutterX;this.conf.wedge===!1?this.conf.direction=="ltr"?i=(this._width-s)/2:i=this._width-(this._width-s)/2:this.conf.direction=="ltr"||(i=this._width-this._currentGutterX)}for(var o=0;o<r.length;o++){var a=this.conf.minify?this.getShortest():this.getNextColumn(o),l=0;(this.conf.surroundingGutter||a!=this._columns.length)&&(l=this._currentGutterX);var f;this.conf.direction=="ltr"?f=i+(t+l)*a:f=i-(t+l)*a-t;var c=this._columns[a];r[o].style.transform="translate3d("+Math.round(f)+"px,"+Math.round(c)+"px,0)",this._columns[a]+=this._sizes[o]+(this._count>1?this.conf.gutterY:this.conf.ultimateGutter)}this._container.style.height=this._columns[this.getLongest()]-this._currentGutterY+"px"};Ne.prototype.getNextColumn=function(t){return t%this._columns.length};Ne.prototype.getShortest=function(){for(var t=0,e=0;e<this._count;e++)this._columns[e]<this._columns[t]&&(t=e);return t};Ne.prototype.getLongest=function(){for(var t=0,e=0;e<this._count;e++)this._columns[e]>this._columns[t]&&(t=e);return t};Ne.prototype.resizeThrottler=function(){this._resizeTimeout||(this._resizeTimeout=setTimeout(function(){this._resizeTimeout=null,this._container.clientWidth!=this._width&&this.layout()}.bind(this),33))};Ne.prototype.destroy=function(){typeof this._removeListener=="function"&&this._removeListener();for(var t=this._container.children,e=0;e<t.length;e++)t[e].style.removeProperty("width"),t[e].style.removeProperty("transform");this._container.style.removeProperty("height"),this._container.style.removeProperty("min-width")};var lt=require("obsidian");var Ja=t=>t;function Eo(t,{delay:e=0,duration:r=400,easing:n=Ja}={}){let i=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:s=>`opacity: ${s*i}`}}var To=(t,e,r)=>{try{t[e]=r}catch(s){}if(t[e]===r)return r;let n,i=Object.getOwnPropertyDescriptor(t,e)||{enumerable:!0,configurable:!0};if(i.get)throw new Error(`Probably a wrong ides to overwrite ${String(e)} getter`);try{Object.defineProperty(t,e,{...i,value:r})}catch(s){n=s}if(t[e]!==r)throw n||new Error("Can't assign");return r};var kn=class extends Error{constructor(e){if(super("Wrong assertion encountered"+(e?`: "${e}"`:"")),this.originalMessage=e,Object.setPrototypeOf(this,new.target.prototype),!!this.stack)try{To(this,"stack",this.stack.split(`
`).filter((...[,r])=>r!==1&&r!==2).join(`
`))}catch(r){}}},pr;function jn(t,e){if(arguments.length===0&&(t=!0),pr!==void 0){pr=void 0;return}if(!t)throw new kn(typeof e=="function"?e():e)}var ko="Wrong usage of the `is` function refer to https://docs.tsafe.dev/is";function Cn(t){let e={};if(pr!==void 0)throw pr=void 0,new Error(ko);return pr=e,Promise.resolve().then(()=>{if(pr===e)throw new Error(ko)}),null}var el=async(t,e,r,n)=>{t.stopPropagation(),t.preventDefault(),Sr(de,R(e).pinnedFiles=N(r)?e().pinnedFiles.filter(i=>i!==n.file.path):[...e().pinnedFiles,n.file.path],R(e)),await n.updateLayoutNextTick()},tl=async(t,e)=>{t.stopPropagation(),await e.file.vault.trash(e.file,!0),await e.updateLayoutNextTick()},jo=async(t,e,r)=>await e().workspace.getLeaf("tab").openFile(r.file),rl=it("<h1> </h1>"),nl=it('<div class="folder-name svelte-pv1ih7"><span></span> </div>'),il=it('<div class="card svelte-pv1ih7" role="link" tabindex="0"><!> <div></div> <div class="card-info svelte-pv1ih7"><button class="clickable-icon svelte-pv1ih7" aria-label="Pin file"></button> <!> <button class="clickable-icon" aria-label="Delete file"></button></div></div>'),sl={hash:"svelte-pv1ih7",code:`.card.svelte-pv1ih7 {position:absolute;background-color:var(--background-primary-alt);border:1px solid var(--background-modifier-border);padding:var(--card-padding);word-wrap:break-word;overflow-y:hidden;margin:0;}.card.transition.svelte-pv1ih7 {transition-property:transform;transition-duration:0.4s;}.card.svelte-pv1ih7 {font-size:0.8rem;}.card.svelte-pv1ih7 p,
  .card.svelte-pv1ih7 ul {margin:0.3rem 0;}.card.svelte-pv1ih7 h1,
  .card.svelte-pv1ih7 h2,
  .card.svelte-pv1ih7 h3 {margin:0 0 0.3rem;}.card.svelte-pv1ih7 ul {padding-left:var(--size-4-5);}.card.svelte-pv1ih7 p:has(> span.image-embed):not(:has(br)) {margin:0;}.card.svelte-pv1ih7 span.image-embed {margin:0 calc(-1 * var(--card-padding));width:calc(100% + 2 * var(--card-padding));}

  /* Images embeds alone in a paragraph */.card.svelte-pv1ih7 p:has(> span.image-embed):not(:has(br)) span.image-embed {display:block;& img {display:block;}}

  /* Image embeds followed by line break in same paragraph */.card.svelte-pv1ih7 p:has(> span.image-embed):has(br) span.image-embed {display:inline-block;}

  /** Embed notes */.card.svelte-pv1ih7 p:has(> span.markdown-embed),
  .card.svelte-pv1ih7 .block-language-dataview {overflow:hidden;max-height:5rem;position:relative;}.card.svelte-pv1ih7 p:has(> span.markdown-embed) > .embed-shadow,
  .card.svelte-pv1ih7 .block-language-dataview > .embed-shadow {position:absolute;top:0;left:0;right:0;bottom:0;box-shadow:inset 0 -2rem 1rem -1rem var(--background-primary-alt);}.card.svelte-pv1ih7:hover {border-color:var(--background-modifier-border-hover);}.card.svelte-pv1ih7 h3 {word-wrap:break-word;}.card.svelte-pv1ih7 .card-info:where(.svelte-pv1ih7) {margin:calc(-1 * var(--card-padding));margin-top:0;border-top:1px solid var(--background-modifier-border);padding:var(--size-4-1) var(--card-padding);background-color:var(--background-primary);display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:var(--size-4-1);}.card.svelte-pv1ih7 .card-info:where(.svelte-pv1ih7) .clickable-icon.is-active:where(.svelte-pv1ih7) {color:var(--tab-text-color-focused-active);background-color:var(--background-modifier-hover);}.card.svelte-pv1ih7 .card-info:where(.svelte-pv1ih7) .folder-name:where(.svelte-pv1ih7) {flex-grow:1;display:flex;align-items:center;justify-content:center;gap:var(--size-4-1);color:var(--text-muted);}`};function Hi(t,e){Rt(e,!0),kr(t,sl);let r=Cr(),n=()=>Pe(de,"$settings",r),i=()=>Pe(En,"$app",r),s=()=>Pe(Yi,"$view",r),o,a=kt(()=>n().pinnedFiles.includes(e.file.path)),l=Zr(!0),f=Zr(!1);function c(g,C){var V,ve,U,K,ge;if(C.sourcePath!==e.file.path||(n().displayTitle!="Both"&&g.children.length>0&&g.children[0].tagName==="H1"&&g.children[0].textContent&&(n().displayTitle=="Title"?ee(l,!1):n().displayTitle=="Filename"&&g.children[0].remove()),g.children.length===0))return;for(let w=0;w<g.children.length;w++)(g.children[w].getElementsByClassName("internal-embed").length||g.children[w].className.includes("block-language-dataview"))&&(g.children[w].appendChild(document.createElement("div")).className="embed-shadow");let A=0,M=0;do M+=((ve=(V=g.children[A])==null?void 0:V.textContent)==null?void 0:ve.length)||0;while(A<g.children.length&&M<200&&++A);for(let w=g.children.length-1;w>A;w--)(U=g.children[w])==null||U.remove();if(M<200||!g.children[A].lastChild||((K=g.children[A].lastChild)==null?void 0:K.nodeType)!==Node.TEXT_NODE)return;let D=(ge=g.children[A].lastChild)==null?void 0:ge.textContent;if(D!=null){let w=g.children[A].lastChild;jn(!Cn(w)),jn(!Cn(D));let F=Math.min(50,200-(M-D.length));w.textContent=`${D.slice(0,F)} ...`}}let u=async g=>{let C=await e.file.vault.cachedRead(e.file);lt.MarkdownPreviewRenderer.registerPostProcessor(c),await lt.MarkdownRenderer.render(i(),C,g,e.file.path,s()),lt.MarkdownPreviewRenderer.unregisterPostProcessor(c)},d=g=>(0,lt.setIcon)(g,"pin"),p=g=>(0,lt.setIcon)(g,"trash"),_=g=>(0,lt.setIcon)(g,"folder");gn(()=>((async()=>(await u(o),await e.updateLayoutNextTick(),ee(f,!0)))(),()=>e.updateLayoutNextTick()));var h=il();h.__click=[jo,i,e],h.__keydown=[jo,i,e];var b=Ce(h);{var $=g=>{var C=rl(),A=Ce(C,!0);_e(C),We(()=>or(A,e.file.basename)),Qe(g,C)};lr(b,g=>{N(l)&&g($)})}var k=ue(b,2);jr(k,g=>o=g,()=>o);var v=ue(k,2),P=Ce(v);P.__click=[el,n,a,e],st(P,g=>d==null?void 0:d(g));var x=ue(P,2);{var E=g=>{var C=nl(),A=Ce(C);st(A,D=>_==null?void 0:_(D));var M=ue(A,1,!0);_e(C),We(()=>or(M,e.file.parent.path)),Qe(g,C)};lr(x,g=>{e.file.parent!=null&&e.file.parent.path!=="/"&&g(E)})}var Q=ue(x,2);Q.__click=[tl,e],st(Q,g=>p==null?void 0:p(g)),_e(v),_e(h),We(()=>{Ft(h,"transition",N(f)),Ft(P,"is-active",N(a))}),bi(3,h,()=>Eo),Qe(t,h),At()}ir(["click","keydown"]);var al=(t,e)=>Ze(Ve,""),ll=(t,e)=>{t.stopPropagation(),Ze(Ve,"")},fl=(t,e)=>Ze(Bt,!e()),cl=(t,e)=>{t.stopPropagation(),Ze(Bt,!e())},ul=(t,e,r)=>e(r()),dl=(t,e,r)=>{t.stopPropagation(),e(r())},pl=it('<div class="input-right-decorator clickable-icon svelte-sj095f" role="checkbox" aria-label="Save search" tabindex="0" style="transform: translateY(-50%) translateX(-100%)"></div>'),hl=(t,e,r)=>Ze(Ve,N(r)),_l=it('<button class="action-bar__tag svelte-sj095f"> </button>'),ml=it('<div class="action-bar svelte-sj095f"><button class="clickable-icon sort-button" aria-label="Sort"></button> <div class="action-bar__search svelte-sj095f"><div class="search-input-container svelte-sj095f"><input enterkeyhint="search" type="search" spellcheck="false" class="svelte-sj095f"> <div class="loading-bar svelte-sj095f"></div> <div class="search-input-clear-button svelte-sj095f" role="button" tabindex="0"></div> <div class="input-right-decorator clickable-icon svelte-sj095f" role="checkbox" aria-label="Case sensitive search" tabindex="0"></div> <!></div></div> <div class="action-bar__tags svelte-sj095f"><div class="action-bar__tags__list svelte-sj095f"></div></div></div> <div class="cards-container svelte-sj095f"></div>',1),vl={hash:"svelte-sj095f",code:`.action-bar.svelte-sj095f {position:relative;display:flex;flex-direction:row-reverse;gap:var(--size-4-5);margin-bottom:var(--size-4-5);flex-wrap:wrap;
    @media screen and (min-width: 700px) {flex-wrap:nowrap;
    }}.action-bar.svelte-sj095f .action-bar__tags:where(.svelte-sj095f) {flex-grow:1;-ms-overflow-style:none;scrollbar-width:none;white-space:nowrap;overflow:auto;&::-webkit-scrollbar {display:none;}

    @media screen and (min-width: 700px) {overflow:hidden;& .action-bar__tags__list:where(.svelte-sj095f) {transition:box-shadow 0.3s;}&:hover .action-bar__tags__list:where(.svelte-sj095f) {position:absolute;top:0;left:0;right:0;white-space:normal;z-index:var(--layer-popover);background-color:var(--background-primary);padding-bottom:var(--size-4-2);box-shadow:0 0 var(--size-2-3) var(--size-2-3)
          var(--background-primary);& button.action-bar__tag:where(.svelte-sj095f) {margin-bottom:var(--size-2-2);}}
    }}.action-bar.svelte-sj095f button.action-bar__tag:where(.svelte-sj095f) {font-size:var(--tag-size);color:var(--tag-color);text-decoration:var(--tag-decoration);background-color:var(--tag-background);border:var(--tag-border-width) solid var(--tag-border-color);padding:var(--tag-padding-y) var(--tag-padding-x);border-radius:var(--tag-radius);font-weight:var(--tag-weight);margin-right:var(--size-2-2);&:hover {color:var(--tag-color-hover);text-decoration:var(--tag-decoration-hover);background-color:var(--tag-background-hover);border-color:var(--tag-border-color-hover);}}.action-bar.svelte-sj095f .action-bar__search:where(.svelte-sj095f) {flex-grow:1;
    @media screen and (min-width: 700px) {min-width:300px;max-width:300px;box-shadow:calc(0px - var(--size-4-5)) 0 var(--size-2-3) var(--size-2-3)
        var(--background-primary);
    }.search-input-container:where(.svelte-sj095f) {background-color:var(--background-primary);z-index:0;& .loading-bar:where(.svelte-sj095f) {z-index:1;position:absolute;top:0;right:0;bottom:0;width:var(--loading);background-color:var(--background-secondary);}& div:where(.svelte-sj095f):not(.loading-bar) {z-index:2;}& input:where(.svelte-sj095f) {background:transparent;position:relative;z-index:2;}}}.cards-container.svelte-sj095f {position:relative;container-type:inline-size;}.cards-container.svelte-sj095f * {--card-padding: var(--size-4-3);--card-gutter: var(--size-4-5);}`};function Ki(t,e){Rt(e,!1),kr(t,vl);let r=Cr(),n=()=>Pe(de,"$settings",r),i=()=>Pe(dr,"$sort",r),s=()=>Pe(Ve,"$searchQuery",r),o=()=>Pe(ur,"$searchResultLoadingState",r),a=()=>Pe(Bt,"$searchCaseSensitive",r),l=()=>Pe(Xe,"$displayedFiles",r),f,c=Vn(),u=w=>{(0,hr.setIcon)(w,"arrow-down-wide-narrow")},d=w=>{(0,hr.setIcon)(w,"case-sensitive")},p=w=>{(0,hr.setIcon)(w,"star")};function _(w){var F;w&&Sr(de,R(n).savedSearch=(F=n().savedSearch)!=null&&F.includes(w)?n().savedSearch.filter(J=>J!==w):[...n().savedSearch||[],w],R(n))}function h(w){let F=new hr.Menu;F.addItem(J=>{J.setTitle("Last created"),J.setChecked(i()=="ctime"),J.onClick(async()=>{Ze(dr,"ctime")})}),F.addItem(J=>{J.setTitle("Last modified"),J.setChecked(i()=="mtime"),J.onClick(async()=>{Ze(dr,"mtime")})}),F.showAtMouseEvent(w)}gn(()=>(f=new Ne({container:N(c),baseWidth:n().minCardWidth,gutter:20,surroundingGutter:!1,ultimateGutter:20,wedge:!0}),f.layout(),()=>{f.destroy()}));let b=new Date,$=null,k=()=>new Promise(w=>{if(b.getTime()+100>new Date().getTime()&&$===null){$=setTimeout(()=>{f.layout(),b=new Date,$=null,w()},b.getTime()+100-new Date().getTime());return}f.layout(),b=new Date,w()}),v=async()=>(await wr(),await k());Xe.subscribe(v),Oi();var P=ml(),x=ni(P),E=Ce(x);E.__click=h,st(E,w=>u==null?void 0:u(w));var Q=ue(E,2),g=Ce(Q),C=Ce(g);vi(C);var A=ue(C,2),M=ue(A,2);M.__click=[al,s],M.__keydown=[ll,s];var D=ue(M,2);D.__click=[fl,a],D.__keydown=[cl,a],st(D,w=>d==null?void 0:d(w));var V=ue(D,2);{var ve=w=>{var F=pl();We(()=>{var Ke;return fr(F,"aria-checked",(Ke=n().savedSearch)==null?void 0:Ke.includes(s()))}),F.__click=[ul,_,s],F.__keydown=[dl,_,s];let J=Jr(()=>{var Ke;return(Ke=n().savedSearch)==null?void 0:Ke.includes(s())});st(F,Ke=>p==null?void 0:p(Ke)),We(()=>Ft(F,"is-active",N(J))),Qe(w,F)};lr(V,w=>{s()&&w(ve)})}_e(g),_e(Q);var U=ue(Q,2),K=Ce(U);_n(K,5,()=>n().savedSearch||[],_i,(w,F)=>{var J=_l();J.__click=[hl,s,F];var Ke=Ce(J,!0);_e(J),We(()=>or(Ke,N(F))),Qe(w,J)}),_e(K),_e(U),_e(x);var ge=ue(x,2);_n(ge,5,l,w=>w.path+w.stat.mtime,(w,F)=>{Hi(w,{get file(){return N(F)},updateLayoutNextTick:v})}),_e(ge),jr(ge,w=>ee(c,w),()=>N(c)),We(()=>{gi(A,"--loading",`${(1-o())*100}%`),fr(D,"aria-checked",a()),Ft(D,"is-active",a())}),$i(C,s,w=>Ze(Ve,w)),Qe(t,P),At()}ir(["click","keydown"]);var zr="cards-view",Sn=class extends Vt.ItemView{getViewType(){return zr}getDisplayText(){return"Cards View"}async onOpen(){let e=this.containerEl.children[1];B.view.set(this),B.files.set(this.app.vault.getMarkdownFiles()),this.registerEvent(this.app.vault.on("create",async r=>{this.app.workspace.layoutReady&&r instanceof Vt.TFile&&r.extension==="md"&&B.files.update(n=>n==null?void 0:n.concat(r))})),this.registerEvent(this.app.vault.on("delete",async r=>{r instanceof Vt.TFile&&r.extension==="md"&&B.files.update(n=>n==null?void 0:n.filter(i=>i.path!==r.path))})),this.registerEvent(this.app.vault.on("modify",async r=>{r instanceof Vt.TFile&&r.extension==="md"&&B.files.update(n=>n==null?void 0:n.map(i=>i.path===r.path?r:i))})),this.registerEvent(this.app.vault.on("rename",async(r,n)=>{r instanceof Vt.TFile&&r.extension==="md"&&B.files.update(i=>i==null?void 0:i.map(s=>s.path===n?r:s))})),ar(Ki,{target:e}),e.addEventListener("scroll",async()=>{e.scrollTop+e.clientHeight>e.scrollHeight-500&&B.displayedCount.set(I(B.displayedFiles).length+50)})}async onClose(){B.searchQuery.set(""),B.displayedCount.set(50),B.sort.set("mtime")}};var Pn=class extends Rn.Plugin{constructor(){super(...arguments);this.settings=Object.assign({},Zi)}async onload(){this.settings=Object.assign(this.settings,await this.loadData()),this.settings.savedSearch||(this.settings.savedSearch=await this.getTags()),B.settings.subscribe(async()=>await this.saveSettings()),B.app.set(this.app),B.settings.set(this.settings),B.settings.subscribe(async r=>{this.settings=r,await this.saveSettings()}),B.appCache.set(this.app.metadataCache),this.registerEvent(this.app.metadataCache.on("resolved",async()=>B.appCache.update(()=>this.app.metadataCache))),this.addSettingTab(new Tn(this.app,this)),this.addRibbonIcon("align-start-horizontal","Card view",()=>{this.activateView()}),this.addCommand({id:"cards-view-plugin",name:"Open card view",callback:()=>{this.activateView()}}),this.registerView(zr,r=>new Sn(r)),this.app.workspace.onLayoutReady(()=>{this.settings.launchOnStart&&this.activateView()})}onunload(){}async activateView(){let{workspace:r}=this.app,n,i=r.getLeavesOfType(zr);i.length?n=i[0]:n=r.getLeaf("tab"),await n.setViewState({type:zr,active:!0})}async saveSettings(){await this.saveData(this.settings)}async getTags(){let n=this.app.vault.getMarkdownFiles().map(i=>(0,Rn.getAllTags)(this.app.metadataCache.getFileCache(i))||[]).flat().reduce((i,s)=>(i[s]=(i[s]||0)+1,i),{});return Object.keys(n).sort((i,s)=>n[s]-n[i])}};

/* nosourcemap */